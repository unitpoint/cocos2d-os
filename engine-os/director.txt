
[FILE] raw://../../engine-os/director.os
[1] var core = require("core")

begin function
  begin locals, total 30
    0 _E
    1 _G
    2 core
    3 app
    4 director
    5 alphaBlending
    6 depthTest
    7 projection
    8 updateProjection
    9 applyOrientation
    10 setAppOrientation
    11 DISPLAY_CONTENT_ZORDER
    12 DISPLAY_BORDER_ZORDER
    13 contentWidth
    14 contentHeight
    15 scale
    16 display
    17 displayBorder
    18 displayContent
    19 runningScene
    20 totalFrames
    21 setNextScene
    22 paint
    23 deltaTime
    24 timeSpeed
    25 time
    26 prevAppTime
    27 prevDeltaTime
    28 clamp
    29 coreTriggerEvent
  end locals
  begin set local var
    begin call method
      get local var _E (0 0)
      begin params 2
        push const string "require"
        ,
        push const string "core"
      end params ret values 2
    end call method ret values 1
  end set local var core (2 0)


[2] var app = require("app")

  begin set local var
    begin call method
      get local var _E (0 0)
      begin params 2
        push const string "require"
        ,
        push const string "app"
      end params ret values 2
    end call method ret values 1
  end set local var app (3 0)


[3] require("constants")

  begin call method
    get local var _E (0 0)
    begin params 2
      push const string "require"
      ,
      push const string "constants"
    end params ret values 2
  end call method ret values 0


[4] require("node")

  begin call method
    get local var _E (0 0)
    begin params 2
      push const string "require"
      ,
      push const string "node"
    end params ret values 2
  end call method ret values 0


[5] require("image")

  begin call method
    get local var _E (0 0)
    begin params 2
      push const string "require"
      ,
      push const string "image"
    end params ret values 2
  end call method ret values 0


[6] require("text")

  begin call method
    get local var _E (0 0)
    begin params 2
      push const string "require"
      ,
      push const string "text"
    end params ret values 2
  end call method ret values 0


[7] require("utils")

  begin call method
    get local var _E (0 0)
    begin params 2
      push const string "require"
      ,
      push const string "utils"
    end params ret values 2
  end call method ret values 0


[9] _E = extends _G {}

  begin set local var
    begin extends
      get local var _G (1 0)
      begin object 0
      end object
    end extends ret values 1
  end set local var _E (0 0)


[10] _G.director = _E

  begin set property
    get local var _E (0 0)
    get local var auto create _G (1 0)
    push const string "director"
  end set property ret values 0


[11] var director = _E

  begin set local var
    get local var _E (0 0)
  end set local var director (4 0)


[13] print "screen size "..app.screenSize

  begin call method
    get local var _E (0 0)
    begin params 2
      push const string "print"
      ,
      begin operator ..
        push const string "screen size "
        begin get property
          get local var app (3 0)
          push const string "screenSize"
        end get property ret values 1
      end operator ..
    end params ret values 2
  end call method ret values 0


[15] if(CC_OPTIMIZE_BLEND_FUNC_FOR_PREMULTIPLIED_ALPHA){

  begin if
    begin bool exp
      get env var CC_OPTIMIZE_BLEND_FUNC_FOR_PREMULTIPLIED_ALPHA
    end bool exp
    begin then

[16] CC_BLEND_SRC = GL_ONE

      begin scope
        begin set env var
          get env var GL_ONE
        end set env var CC_BLEND_SRC


[17] CC_BLEND_DST = GL_ONE_MINUS_SRC_ALPHA

        begin set env var
          get env var GL_ONE_MINUS_SRC_ALPHA
        end set env var CC_BLEND_DST
      end scope ret values 0
    end then
    begin else

[19] CC_BLEND_SRC = GL_SRC_ALPHA

      begin scope
        begin set env var
          get env var GL_SRC_ALPHA
        end set env var CC_BLEND_SRC


[20] CC_BLEND_DST = GL_ONE_MINUS_SRC_ALPHA

        begin set env var
          get env var GL_ONE_MINUS_SRC_ALPHA
        end set env var CC_BLEND_DST
      end scope ret values 0
    end else
  end if ret values 0


[23] var alphaBlending

  begin params 1
    new local var alphaBlending (5 0)
  end params ret values 0


[24] function get alphaBlending(){ return alphaBlending }

  begin set env var
    begin function
      begin locals, total 2
        0 _E
        1 _G
      end locals
      begin return
        get local var alphaBlending (5 1)
      end return values 1
    end function
  end set env var __get@alphaBlending


[25] function set alphaBlending(a){

  begin set env var
    begin function
      begin locals, total 3
        0 a (param)
        1 _E
        2 _G
      end locals

[26] alphaBlending = a

      begin set local var
        get local var a (0 0 param)
      end set local var alphaBlending (5 1)


[27] if(a){

      begin if
        begin bool exp
          get local var a (0 0 param)
        end bool exp
        begin then

[28] glEnable(GL_BLEND)

          begin scope
            begin call method
              get local var _E (1 0)
              begin params 2
                push const string "glEnable"
                ,
                get env var GL_BLEND
              end params ret values 2
            end call method ret values 0


[29] glBlendFunc(CC_BLEND_SRC, CC_BLEND_DST)

            begin call method
              get local var _E (1 0)
              begin params 3
                push const string "glBlendFunc"
                ,
                get env var CC_BLEND_SRC
                ,
                get env var CC_BLEND_DST
              end params ret values 3
            end call method ret values 0
          end scope ret values 0
        end then
        begin else

[31] glDisable(GL_BLEND)

          begin scope
            begin call method
              get local var _E (1 0)
              begin params 2
                push const string "glDisable"
                ,
                get env var GL_BLEND
              end params ret values 2
            end call method ret values 0
          end scope ret values 0
        end else
      end if ret values 0
    end function
  end set env var __set@alphaBlending


[35] var depthTest

  begin params 1
    new local var depthTest (6 0)
  end params ret values 0


[36] function get depthTest(){ return depthTest }

  begin set env var
    begin function
      begin locals, total 2
        0 _E
        1 _G
      end locals
      begin return
        get local var depthTest (6 1)
      end return values 1
    end function
  end set env var __get@depthTest


[37] function set depthTest(a){

  begin set env var
    begin function
      begin locals, total 3
        0 a (param)
        1 _E
        2 _G
      end locals

[38] depthTest = a

      begin set local var
        get local var a (0 0 param)
      end set local var depthTest (6 1)


[39] if(a){

      begin if
        begin bool exp
          get local var a (0 0 param)
        end bool exp
        begin then

[40] glClearDepth(1.0)

          begin scope
            begin call method
              get local var _E (1 0)
              begin params 2
                push const string "glClearDepth"
                ,
                push const number 1.0
              end params ret values 2
            end call method ret values 0


[41] glEnable(GL_DEPTH_TEST)

            begin call method
              get local var _E (1 0)
              begin params 2
                push const string "glEnable"
                ,
                get env var GL_DEPTH_TEST
              end params ret values 2
            end call method ret values 0


[42] glDepthFunc(GL_LEQUAL)

            begin call method
              get local var _E (1 0)
              begin params 2
                push const string "glDepthFunc"
                ,
                get env var GL_LEQUAL
              end params ret values 2
            end call method ret values 0
          end scope ret values 0
        end then
        begin else

[45] glDisable(GL_DEPTH_TEST)

          begin scope
            begin call method
              get local var _E (1 0)
              begin params 2
                push const string "glDisable"
                ,
                get env var GL_DEPTH_TEST
              end params ret values 2
            end call method ret values 0
          end scope ret values 0
        end else
      end if ret values 0
    end function
  end set env var __set@depthTest


[49] var projection

  begin params 1
    new local var projection (7 0)
  end params ret values 0


[50] function get projection(){ return projection }

  begin set env var
    begin function
      begin locals, total 2
        0 _E
        1 _G
      end locals
      begin return
        get local var projection (7 1)
      end return values 1
    end function
  end set env var __get@projection


[51] function set projection(a){

  begin set env var
    begin function
      begin locals, total 3
        0 a (param)
        1 _E
        2 _G
      end locals

[52] projection = a

      begin set local var
        get local var a (0 0 param)
      end set local var projection (7 1)


[53] updateProjection()

      begin call
        get local var updateProjection (8 1)
        begin params 0
        end params ret values 0
      end call ret values 0
    end function
  end set env var __set@projection


[56] var function updateProjection(){

  begin set local var
    begin function
      begin locals, total 4
        0 _E
        1 _G
        2 size
        3 zeye
      end locals

[57] var size = app.screenSize

      begin set local var
        begin get property
          get local var app (3 1)
          push const string "screenSize"
        end get property ret values 1
      end set local var size (2 0)


[58] var zeye = size.height / 1.1566

      begin set local var
        begin operator /
          begin get property
            get local var size (2 0)
            push const string "height"
          end get property ret values 1
          push const number 1.1566
        end operator /
      end set local var zeye (3 0)


[59] if(projection == PROJECTION_2D){

      begin if
        begin bool exp
          begin logic ==
            get local var projection (7 1)
            get env var PROJECTION_2D
          end logic ==
        end bool exp
        begin then

[60] glViewport(0, 0, size.width, size.height)

          begin scope
            begin call method
              get local var _E (0 0)
              begin params 5
                push const string "glViewport"
                ,
                push const number 0
                ,
                push const number 0
                ,
                begin get property
                  get local var size (2 0)
                  push const string "width"
                end get property ret values 1
                ,
                begin get property
                  get local var size (2 0)
                  push const string "height"
                end get property ret values 1
              end params ret values 5
            end call method ret values 0


[61] glMatrixMode(GL_PROJECTION)

            begin call method
              get local var _E (0 0)
              begin params 2
                push const string "glMatrixMode"
                ,
                get env var GL_PROJECTION
              end params ret values 2
            end call method ret values 0


[62] glLoadIdentity()

            begin call method
              get local var _E (0 0)
              begin params 1
                push const string "glLoadIdentity"
              end params ret values 1
            end call method ret values 0


[63] ccglOrtho(0, size.width, 0, size.height, -1024 * CC_CONTENT_SCALE_FACTOR(),

            begin call method
              get local var _E (0 0)
              begin params 7
                push const string "ccglOrtho"
                ,
                push const number 0
                ,
                begin get property
                  get local var size (2 0)
                  push const string "width"
                end get property ret values 1
                ,
                push const number 0
                ,
                begin get property
                  get local var size (2 0)
                  push const string "height"
                end get property ret values 1
                ,
                begin operator *
                  begin neg
                    push const number 1024
                  end neg
                  begin call method
                    get local var _E (0 0)
                    begin params 1
                      push const string "CC_CONTENT_SCALE_FACTOR"
                    end params ret values 1
                  end call method ret values 1
                end operator *
                ,

[64] 1024 * CC_CONTENT_SCALE_FACTOR())

                begin operator *
                  push const number 1024
                  begin call method
                    get local var _E (0 0)
                    begin params 1
                      push const string "CC_CONTENT_SCALE_FACTOR"
                    end params ret values 1
                  end call method ret values 1
                end operator *
              end params ret values 7
            end call method ret values 0


[65] glMatrixMode(GL_MODELVIEW)

            begin call method
              get local var _E (0 0)
              begin params 2
                push const string "glMatrixMode"
                ,
                get env var GL_MODELVIEW
              end params ret values 2
            end call method ret values 0


[66] glLoadIdentity()

            begin call method
              get local var _E (0 0)
              begin params 1
                push const string "glLoadIdentity"
              end params ret values 1
            end call method ret values 0
          end scope ret values 0
        end then
        begin else

[67] }else if(projection == PROJECTION_3D){

          begin if
            begin bool exp
              begin logic ==
                get local var projection (7 1)
                get env var PROJECTION_3D
              end logic ==
            end bool exp
            begin then

[68] glViewport(0, 0, size.width, size.height)

              begin scope
                begin call method
                  get local var _E (0 0)
                  begin params 5
                    push const string "glViewport"
                    ,
                    push const number 0
                    ,
                    push const number 0
                    ,
                    begin get property
                      get local var size (2 0)
                      push const string "width"
                    end get property ret values 1
                    ,
                    begin get property
                      get local var size (2 0)
                      push const string "height"
                    end get property ret values 1
                  end params ret values 5
                end call method ret values 0


[69] glMatrixMode(GL_PROJECTION)

                begin call method
                  get local var _E (0 0)
                  begin params 2
                    push const string "glMatrixMode"
                    ,
                    get env var GL_PROJECTION
                  end params ret values 2
                end call method ret values 0


[70] glLoadIdentity()

                begin call method
                  get local var _E (0 0)
                  begin params 1
                    push const string "glLoadIdentity"
                  end params ret values 1
                end call method ret values 0


[71] gluPerspective(60, size.width/size.height, 0.5, 1500.0)

                begin call method
                  get local var _E (0 0)
                  begin params 5
                    push const string "gluPerspective"
                    ,
                    push const number 60
                    ,
                    begin operator /
                      begin get property
                        get local var size (2 0)
                        push const string "width"
                      end get property ret values 1
                      begin get property
                        get local var size (2 0)
                        push const string "height"
                      end get property ret values 1
                    end operator /
                    ,
                    push const number 0.5
                    ,
                    push const number 1500.0
                  end params ret values 5
                end call method ret values 0


[73] glMatrixMode(GL_MODELVIEW)

                begin call method
                  get local var _E (0 0)
                  begin params 2
                    push const string "glMatrixMode"
                    ,
                    get env var GL_MODELVIEW
                  end params ret values 2
                end call method ret values 0


[74] glLoadIdentity()

                begin call method
                  get local var _E (0 0)
                  begin params 1
                    push const string "glLoadIdentity"
                  end params ret values 1
                end call method ret values 0


[75] gluLookAt(size.width/2, size.height/2, -zeye,

                begin call method
                  get local var _E (0 0)
                  begin params 10
                    push const string "gluLookAt"
                    ,
                    begin operator /
                      begin get property
                        get local var size (2 0)
                        push const string "width"
                      end get property ret values 1
                      push const number 2
                    end operator /
                    ,
                    begin operator /
                      begin get property
                        get local var size (2 0)
                        push const string "height"
                      end get property ret values 1
                      push const number 2
                    end operator /
                    ,
                    begin neg
                      get local var zeye (3 0)
                    end neg
                    ,

[76] size.width/2, size.height/2, 0,

                    begin operator /
                      begin get property
                        get local var size (2 0)
                        push const string "width"
                      end get property ret values 1
                      push const number 2
                    end operator /
                    ,
                    begin operator /
                      begin get property
                        get local var size (2 0)
                        push const string "height"
                      end get property ret values 1
                      push const number 2
                    end operator /
                    ,
                    push const number 0
                    ,

[77] 0.0, -1.0, 0.0)

                    push const number 0.0
                    ,
                    begin neg
                      push const number 1.0
                    end neg
                    ,
                    push const number 0.0
                  end params ret values 10
                end call method ret values 0
              end scope ret values 0
            end then
          end if ret values 0
        end else
      end if ret values 0
    end function
  end set local var updateProjection (8 0)


[81] var function applyOrientation()

  begin set local var
    begin function
      begin locals, total 5
        0 _E
        1 _G
        2 w
        3 h
        4 orientation
      end locals

[83] var w = app.screenWidth / 2

      begin set local var
        begin operator /
          begin get property
            get local var app (3 1)
            push const string "screenWidth"
          end get property ret values 1
          push const number 2
        end operator /
      end set local var w (2 0)


[84] var h = app.screenHeight / 2

      begin set local var
        begin operator /
          begin get property
            get local var app (3 1)
            push const string "screenHeight"
          end get property ret values 1
          push const number 2
        end operator /
      end set local var h (3 0)


[86] var orientation = app.orientation

      begin set local var
        begin get property
          get local var app (3 1)
          push const string "orientation"
        end get property ret values 1
      end set local var orientation (4 0)


[87] if(orientation == ORIENTATION_PORTRAIT){

      begin if
        begin bool exp
          begin logic ==
            get local var orientation (4 0)
            get env var ORIENTATION_PORTRAIT
          end logic ==
        end bool exp
        begin then

[91] }else if(orientation == ORIENTATION_PORTRAIT_UPSIDE_DOWN){

          begin scope
          end scope ret values 0
        end then
        begin else
          begin if
            begin bool exp
              begin logic ==
                get local var orientation (4 0)
                get env var ORIENTATION_PORTRAIT_UPSIDE_DOWN
              end logic ==
            end bool exp
            begin then

[93] glTranslatef(w,h,0)

              begin scope
                begin call method
                  get local var _E (0 0)
                  begin params 4
                    push const string "glTranslatef"
                    ,
                    get local var w (2 0)
                    ,
                    get local var h (3 0)
                    ,
                    push const number 0
                  end params ret values 4
                end call method ret values 0


[94] glRotatef(180,0,0,1)

                begin call method
                  get local var _E (0 0)
                  begin params 5
                    push const string "glRotatef"
                    ,
                    push const number 180
                    ,
                    push const number 0
                    ,
                    push const number 0
                    ,
                    push const number 1
                  end params ret values 5
                end call method ret values 0


[95] glTranslatef(-w,-h,0)

                begin call method
                  get local var _E (0 0)
                  begin params 4
                    push const string "glTranslatef"
                    ,
                    begin neg
                      get local var w (2 0)
                    end neg
                    ,
                    begin neg
                      get local var h (3 0)
                    end neg
                    ,
                    push const number 0
                  end params ret values 4
                end call method ret values 0
              end scope ret values 0
            end then
            begin else

[96] }else if(orientation == ORIENTATION_LANDSCAPE_RIGHT){

              begin if
                begin bool exp
                  begin logic ==
                    get local var orientation (4 0)
                    get env var ORIENTATION_LANDSCAPE_RIGHT
                  end logic ==
                end bool exp
                begin then

[97] glTranslatef(w,h,0)

                  begin scope
                    begin call method
                      get local var _E (0 0)
                      begin params 4
                        push const string "glTranslatef"
                        ,
                        get local var w (2 0)
                        ,
                        get local var h (3 0)
                        ,
                        push const number 0
                      end params ret values 4
                    end call method ret values 0


[98] glRotatef(90,0,0,1)

                    begin call method
                      get local var _E (0 0)
                      begin params 5
                        push const string "glRotatef"
                        ,
                        push const number 90
                        ,
                        push const number 0
                        ,
                        push const number 0
                        ,
                        push const number 1
                      end params ret values 5
                    end call method ret values 0


[99] glTranslatef(-h,-w,0)

                    begin call method
                      get local var _E (0 0)
                      begin params 4
                        push const string "glTranslatef"
                        ,
                        begin neg
                          get local var h (3 0)
                        end neg
                        ,
                        begin neg
                          get local var w (2 0)
                        end neg
                        ,
                        push const number 0
                      end params ret values 4
                    end call method ret values 0
                  end scope ret values 0
                end then
                begin else

[100] }else if(orientation == ORIENTATION_LANDSCAPE_LEFT){

                  begin if
                    begin bool exp
                      begin logic ==
                        get local var orientation (4 0)
                        get env var ORIENTATION_LANDSCAPE_LEFT
                      end logic ==
                    end bool exp
                    begin then

[101] glTranslatef(w,h,0)

                      begin scope
                        begin call method
                          get local var _E (0 0)
                          begin params 4
                            push const string "glTranslatef"
                            ,
                            get local var w (2 0)
                            ,
                            get local var h (3 0)
                            ,
                            push const number 0
                          end params ret values 4
                        end call method ret values 0


[102] glRotatef(-90,0,0,1)

                        begin call method
                          get local var _E (0 0)
                          begin params 5
                            push const string "glRotatef"
                            ,
                            begin neg
                              push const number 90
                            end neg
                            ,
                            push const number 0
                            ,
                            push const number 0
                            ,
                            push const number 1
                          end params ret values 5
                        end call method ret values 0


[103] glTranslatef(-h,-w,0)

                        begin call method
                          get local var _E (0 0)
                          begin params 4
                            push const string "glTranslatef"
                            ,
                            begin neg
                              get local var h (3 0)
                            end neg
                            ,
                            begin neg
                              get local var w (2 0)
                            end neg
                            ,
                            push const number 0
                          end params ret values 4
                        end call method ret values 0
                      end scope ret values 0
                    end then
                  end if ret values 0
                end else
              end if ret values 0
            end else
          end if ret values 0
        end else
      end if ret values 0
    end function
  end set local var applyOrientation (9 0)


[107] director.alphaBlending = true

  begin set property
    const true
    get local var auto create director (4 0)
    push const string "alphaBlending"
  end set property ret values 0


[108] director.depthTest = true

  begin set property
    const true
    get local var auto create director (4 0)
    push const string "depthTest"
  end set property ret values 0


[109] director.projection = PROJECTION_3D

  begin set property
    get env var PROJECTION_3D
    get local var auto create director (4 0)
    push const string "projection"
  end set property ret values 0


[111] glClearColor(0 0 0 1)

  begin call method
    get local var _E (0 0)
    begin params 5
      push const string "glClearColor"
      ,
      push const number 0
      ,
      push const number 0
      ,
      push const number 0
      ,
      push const number 1
    end params ret values 5
  end call method ret values 0


[113] animationInterval = 1 / 60

  begin set env var
    push const number 0.01666666753590107
  end set env var animationInterval


[115] var setAppOrientation = app.__set@orientation

  begin set local var
    begin get property
      get local var app (3 0)
      push const string "__set@orientation"
    end get property ret values 1
  end set local var setAppOrientation (10 0)


[116] app.__set@orientation = function(a){

  begin set property
    begin function
      begin locals, total 3
        0 a (param)
        1 _E
        2 _G
      end locals

[117] setAppOrientation.call(app, a)

      begin call method
        get local var setAppOrientation (10 1)
        begin params 3
          push const string "call"
          ,
          get local var app (3 1)
          ,
          get local var a (0 0 param)
        end params ret values 3
      end call method ret values 0


[119] updateProjection()

      begin call
        get local var updateProjection (8 1)
        begin params 0
        end params ret values 0
      end call ret values 0
    end function

[116] app.__set@orientation = function(a){

    get local var auto create app (3 0)
    push const string "__set@orientation"
  end set property ret values 0


[124] app.orientation = ORIENTATION_PORTRAIT

  begin set property
    get env var ORIENTATION_PORTRAIT
    get local var auto create app (3 0)
    push const string "orientation"
  end set property ret values 0


[127] var DISPLAY_CONTENT_ZORDER = 0

  begin set local var
    push const number 0
  end set local var DISPLAY_CONTENT_ZORDER (11 0)


[128] var DISPLAY_BORDER_ZORDER = 10

  begin set local var
    push const number 10
  end set local var DISPLAY_BORDER_ZORDER (12 0)


[130] var contentWidth = app.screenWidth

  begin set local var
    begin get property
      get local var app (3 0)
      push const string "screenWidth"
    end get property ret values 1
  end set local var contentWidth (13 0)


[131] function get contentWidth(){ return contentWidth }

  begin set env var
    begin function
      begin locals, total 2
        0 _E
        1 _G
      end locals
      begin return
        get local var contentWidth (13 1)
      end return values 1
    end function
  end set env var __get@contentWidth


[133] var contentHeight = app.screenHeight

  begin set local var
    begin get property
      get local var app (3 0)
      push const string "screenHeight"
    end get property ret values 1
  end set local var contentHeight (14 0)


[134] function get contentHeight(){ return contentHeight }

  begin set env var
    begin function
      begin locals, total 2
        0 _E
        1 _G
      end locals
      begin return
        get local var contentHeight (14 1)
      end return values 1
    end function
  end set env var __get@contentHeight


[136] var scale = "expand" // "letterbox"

  begin set local var
    push const string "expand"
  end set local var scale (15 0)


[138] var display = Scene()

  begin set local var
    begin call method
      get local var _E (0 0)
      begin params 1
        push const string "Scene"
      end params ret values 1
    end call method ret values 1
  end set local var display (16 0)


[141] var displayBorder = Group().insertTo(display).attrs { zOrder = DISPLAY_BORDER_ZORDER }

  begin set local var
    begin call method
      begin call method
        begin call method
          get local var _E (0 0)
          begin params 1
            push const string "Group"
          end params ret values 1
        end call method ret values 1
        begin params 2
          push const string "insertTo"
          ,
          get local var display (16 0)
        end params ret values 2
      end call method ret values 1
      begin params 2
        push const string "attrs"
        ,
        begin object 1
          begin set by name
            get local var DISPLAY_BORDER_ZORDER (12 0)
          end set by name: [zOrder]
        end object
      end params ret values 2
    end call method ret values 1
  end set local var displayBorder (17 0)


[142] var displayContent = Group().insertTo(display).attrs { zOrder = DISPLAY_CONTENT_ZORDER }

  begin set local var
    begin call method
      begin call method
        begin call method
          get local var _E (0 0)
          begin params 1
            push const string "Group"
          end params ret values 1
        end call method ret values 1
        begin params 2
          push const string "insertTo"
          ,
          get local var display (16 0)
        end params ret values 2
      end call method ret values 1
      begin params 2
        push const string "attrs"
        ,
        begin object 1
          begin set by name
            get local var DISPLAY_CONTENT_ZORDER (11 0)
          end set by name: [zOrder]
        end object
      end params ret values 2
    end call method ret values 1
  end set local var displayContent (18 0)


[144] function get contentSize(){

  begin set env var
    begin function
      begin locals, total 2
        0 _E
        1 _G
      end locals

[145] return {

      begin return
        begin object 3

[146] width = contentWidth

          begin set by name
            get local var contentWidth (13 1)
          end set by name: [width]
          ,

[147] height = contentHeight

          begin set by name
            get local var contentHeight (14 1)
          end set by name: [height]
          ,

[148] scale = scale

          begin set by name
            get local var scale (15 1)
          end set by name: [scale]
        end object
      end return values 1
    end function
  end set env var __get@contentSize


[151] function set contentSize(params){

  begin set env var
    begin function
      begin locals, total 7
        0 params (param)
        1 _E
        2 _G
      end locals

[152] if(objectof params){

      begin if
        begin bool exp
          begin objectof
            get local var params (0 0 param)
          end objectof
        end bool exp
        begin then

[153] var screenWidth, screenHeight = app.screenWidth, app.screenHeight

          begin scope
            begin locals 2
              3 screenWidth
              4 screenHeight
            end locals
            begin set local var
              begin set local var
                begin params 2
                  begin get property
                    get local var app (3 1)
                    push const string "screenWidth"
                  end get property ret values 1
                  ,
                  begin get property
                    get local var app (3 1)
                    push const string "screenHeight"
                  end get property ret values 1
                end params ret values 2
              end set local var screenHeight (4 0)
            end set local var screenWidth (3 0)


[154] contentWidth = "width" in params ? params.width : screenWidth

            begin set local var
              begin question
                begin bool exp
                  begin in
                    push const string "width"
                    get local var params (0 0 param)
                  end in
                end bool exp
                begin then value
                  begin get property
                    get local var params (0 0 param)
                    push const string "width"
                  end get property ret values 1
                end then value
                begin else value
                  get local var screenWidth (3 0)
                end else value
              end question ret values 1
            end set local var contentWidth (13 1)


[155] contentHeight = "height" in params ? params.height : screenHeight

            begin set local var
              begin question
                begin bool exp
                  begin in
                    push const string "height"
                    get local var params (0 0 param)
                  end in
                end bool exp
                begin then value
                  begin get property
                    get local var params (0 0 param)
                    push const string "height"
                  end get property ret values 1
                end then value
                begin else value
                  get local var screenHeight (4 0)
                end else value
              end question ret values 1
            end set local var contentHeight (14 1)


[156] scale = "scale" in params ? params.scale : "letterbox"

            begin set local var
              begin question
                begin bool exp
                  begin in
                    push const string "scale"
                    get local var params (0 0 param)
                  end in
                end bool exp
                begin then value
                  begin get property
                    get local var params (0 0 param)
                    push const string "scale"
                  end get property ret values 1
                end then value
                begin else value
                  push const string "letterbox"
                end else value
              end question ret values 1
            end set local var scale (15 1)


[157] if(scale == "none"){

            begin if
              begin bool exp
                begin logic ==
                  get local var scale (15 1)
                  push const string "none"
                end logic ==
              end bool exp
              begin then

[158] displayContent.attrs {

                begin scope
                  begin call method
                    get local var displayContent (18 1)
                    begin params 2
                      push const string "attrs"
                      ,
                      begin object 5

[159] width = contentWidth

                        begin set by name
                          get local var contentWidth (13 1)
                        end set by name: [width]
                        ,

[160] height = contentHeight

                        begin set by name
                          get local var contentHeight (14 1)
                        end set by name: [height]
                        ,

[161] scale = 1

                        begin set by name
                          push const number 1
                        end set by name: [scale]
                        ,

[162] x = (screenWidth - contentWidth)/2

                        begin set by name
                          begin operator /
                            begin operator -
                              get local var screenWidth (3 0)
                              get local var contentWidth (13 1)
                            end operator -
                            push const number 2
                          end operator /
                        end set by name: [x]
                        ,

[163] y = (screenHeight - contentHeight)/2

                        begin set by name
                          begin operator /
                            begin operator -
                              get local var screenHeight (4 0)
                              get local var contentHeight (14 1)
                            end operator -
                            push const number 2
                          end operator /
                        end set by name: [y]
                      end object
                    end params ret values 2
                  end call method ret values 0
                end scope ret values 0
              end then
              begin else

[165] }else if(scale == "zoomStretch"){

                begin if
                  begin bool exp
                    begin logic ==
                      get local var scale (15 1)
                      push const string "zoomStretch"
                    end logic ==
                  end bool exp
                  begin then

[166] displayContent.attrs {

                    begin scope
                      begin call method
                        get local var displayContent (18 1)
                        begin params 2
                          push const string "attrs"
                          ,
                          begin object 6

[167] width = contentWidth

                            begin set by name
                              get local var contentWidth (13 1)
                            end set by name: [width]
                            ,

[168] height = contentHeight

                            begin set by name
                              get local var contentHeight (14 1)
                            end set by name: [height]
                            ,

[169] scaleX = screenWidth / contentWidth

                            begin set by name
                              begin operator /
                                get local var screenWidth (3 0)
                                get local var contentWidth (13 1)
                              end operator /
                            end set by name: [scaleX]
                            ,

[170] scaleY = screenHeight / contentHeight

                            begin set by name
                              begin operator /
                                get local var screenHeight (4 0)
                                get local var contentHeight (14 1)
                              end operator /
                            end set by name: [scaleY]
                            ,

[171] x = 0

                            begin set by name
                              push const number 0
                            end set by name: [x]
                            ,

[172] y = 0

                            begin set by name
                              push const number 0
                            end set by name: [y]
                          end object
                        end params ret values 2
                      end call method ret values 0
                    end scope ret values 0
                  end then
                  begin else

[174] }else if(scale == "expand"){

                    begin if
                      begin bool exp
                        begin logic ==
                          get local var scale (15 1)
                          push const string "expand"
                        end logic ==
                      end bool exp
                      begin then

[175] var scale = math.min(screenWidth / contentWidth, screenHeight / contentHeight)

                        begin scope
                          begin locals 1
                            5 scale
                          end locals
                          begin set local var
                            begin call method
                              get env var math
                              begin params 3
                                push const string "min"
                                ,
                                begin operator /
                                  get local var screenWidth (3 0)
                                  get local var contentWidth (13 1)
                                end operator /
                                ,
                                begin operator /
                                  get local var screenHeight (4 0)
                                  get local var contentHeight (14 1)
                                end operator /
                              end params ret values 3
                            end call method ret values 1
                          end set local var scale (5 0)


[176] contentWidth = contentWidth * screenWidth / contentWidth / scale

                          begin set local var
                            begin operator /
                              begin operator /
                                begin operator *
                                  get local var contentWidth (13 1)
                                  get local var screenWidth (3 0)
                                end operator *
                                get local var contentWidth (13 1)
                              end operator /
                              get local var scale (5 0)
                            end operator /
                          end set local var contentWidth (13 1)


[177] contentHeight = contentHeight * screenHeight / contentHeight / scale

                          begin set local var
                            begin operator /
                              begin operator /
                                begin operator *
                                  get local var contentHeight (14 1)
                                  get local var screenHeight (4 0)
                                end operator *
                                get local var contentHeight (14 1)
                              end operator /
                              get local var scale (5 0)
                            end operator /
                          end set local var contentHeight (14 1)


[178] displayContent.attrs {

                          begin call method
                            get local var displayContent (18 1)
                            begin params 2
                              push const string "attrs"
                              ,
                              begin object 5

[179] width = contentWidth

                                begin set by name
                                  get local var contentWidth (13 1)
                                end set by name: [width]
                                ,

[180] height = contentHeight

                                begin set by name
                                  get local var contentHeight (14 1)
                                end set by name: [height]
                                ,

[181] scale = scale

                                begin set by name
                                  get local var scale (5 0)
                                end set by name: [scale]
                                ,

[182] x = 0

                                begin set by name
                                  push const number 0
                                end set by name: [x]
                                ,

[183] y = 0

                                begin set by name
                                  push const number 0
                                end set by name: [y]
                              end object
                            end params ret values 2
                          end call method ret values 0
                        end scope ret values 0
                      end then
                      begin else

[186] var scale = math[scale == "zoomEven" ? "max" : "min"].call(math, screenWidth / contentWidth, screenHeight / contentHeight)

                        begin scope
                          begin locals 1
                            6 scale
                          end locals
                          begin set local var
                            begin call method
                              begin get property
                                get env var math
                                begin question
                                  begin bool exp
                                    begin logic ==
                                      get local var scale (15 1)
                                      push const string "zoomEven"
                                    end logic ==
                                  end bool exp
                                  begin then value
                                    push const string "max"
                                  end then value
                                  begin else value
                                    push const string "min"
                                  end else value
                                end question ret values 1
                              end get property ret values 1
                              begin params 4
                                push const string "call"
                                ,
                                get env var math
                                ,
                                begin operator /
                                  get local var screenWidth (3 0)
                                  get local var contentWidth (13 1)
                                end operator /
                                ,
                                begin operator /
                                  get local var screenHeight (4 0)
                                  get local var contentHeight (14 1)
                                end operator /
                              end params ret values 4
                            end call method ret values 1
                          end set local var scale (6 0)


[187] displayContent.attrs {

                          begin call method
                            get local var displayContent (18 1)
                            begin params 2
                              push const string "attrs"
                              ,
                              begin object 5

[188] width = contentWidth

                                begin set by name
                                  get local var contentWidth (13 1)
                                end set by name: [width]
                                ,

[189] height = contentHeight

                                begin set by name
                                  get local var contentHeight (14 1)
                                end set by name: [height]
                                ,

[190] scale = scale

                                begin set by name
                                  get local var scale (6 0)
                                end set by name: [scale]
                                ,

[191] x = (screenWidth - contentWidth * scale)/2

                                begin set by name
                                  begin operator /
                                    begin operator -
                                      get local var screenWidth (3 0)
                                      begin operator *
                                        get local var contentWidth (13 1)
                                        get local var scale (6 0)
                                      end operator *
                                    end operator -
                                    push const number 2
                                  end operator /
                                end set by name: [x]
                                ,

[192] y = (screenHeight - contentHeight * scale)/2

                                begin set by name
                                  begin operator /
                                    begin operator -
                                      get local var screenHeight (4 0)
                                      begin operator *
                                        get local var contentHeight (14 1)
                                        get local var scale (6 0)
                                      end operator *
                                    end operator -
                                    push const number 2
                                  end operator /
                                end set by name: [y]
                              end object
                            end params ret values 2
                          end call method ret values 0
                        end scope ret values 0
                      end else
                    end if ret values 0
                  end else
                end if ret values 0
              end else
            end if ret values 0


[195] displayBorder.removeAll()

            begin call method
              get local var displayBorder (17 1)
              begin params 1
                push const string "removeAll"
              end params ret values 1
            end call method ret values 0


[196] if(displayContent.x > 0){

            begin if
              begin bool exp
                begin logic >
                  begin get property
                    get local var displayContent (18 1)
                    push const string "x"
                  end get property ret values 1
                  push const number 0
                end logic >
              end bool exp
              begin then

[197] ColorNode().insertTo(displayBorder).attrs{

                begin scope
                  begin call method
                    begin call method
                      begin call method
                        get local var _E (1 0)
                        begin params 1
                          push const string "ColorNode"
                        end params ret values 1
                      end call method ret values 1
                      begin params 2
                        push const string "insertTo"
                        ,
                        get local var displayBorder (17 1)
                      end params ret values 2
                    end call method ret values 1
                    begin params 2
                      push const string "attrs"
                      ,
                      begin object 6

[198] color = [0 0 0]

                        begin set by name
                          begin array 3
                            begin set auto index
                              push const number 0
                            end set auto index
                            ,
                            begin set auto index
                              push const number 0
                            end set auto index
                            ,
                            begin set auto index
                              push const number 0
                            end set auto index
                          end array
                        end set by name: [color]
                        ,

[199] anchor = [0 0]

                        begin set by name
                          begin array 2
                            begin set auto index
                              push const number 0
                            end set auto index
                            ,
                            begin set auto index
                              push const number 0
                            end set auto index
                          end array
                        end set by name: [anchor]
                        ,

[200] x = 0, y = 0

                        begin set by name
                          push const number 0
                        end set by name: [x]
                        ,
                        begin set by name
                          push const number 0
                        end set by name: [y]
                        ,

[201] width = displayContent.x

                        begin set by name
                          begin get property
                            get local var displayContent (18 1)
                            push const string "x"
                          end get property ret values 1
                        end set by name: [width]
                        ,

[202] height = screenHeight

                        begin set by name
                          get local var screenHeight (4 0)
                        end set by name: [height]
                      end object
                    end params ret values 2
                  end call method ret values 0


[204] ColorNode().insertTo(displayBorder).attrs{

                  begin call method
                    begin call method
                      begin call method
                        get local var _E (1 0)
                        begin params 1
                          push const string "ColorNode"
                        end params ret values 1
                      end call method ret values 1
                      begin params 2
                        push const string "insertTo"
                        ,
                        get local var displayBorder (17 1)
                      end params ret values 2
                    end call method ret values 1
                    begin params 2
                      push const string "attrs"
                      ,
                      begin object 6

[205] color = [0 0 0]

                        begin set by name
                          begin array 3
                            begin set auto index
                              push const number 0
                            end set auto index
                            ,
                            begin set auto index
                              push const number 0
                            end set auto index
                            ,
                            begin set auto index
                              push const number 0
                            end set auto index
                          end array
                        end set by name: [color]
                        ,

[206] anchor = [0 0]

                        begin set by name
                          begin array 2
                            begin set auto index
                              push const number 0
                            end set auto index
                            ,
                            begin set auto index
                              push const number 0
                            end set auto index
                          end array
                        end set by name: [anchor]
                        ,

[207] x = screenWidth - displayContent.x, y = 0

                        begin set by name
                          begin operator -
                            get local var screenWidth (3 0)
                            begin get property
                              get local var displayContent (18 1)
                              push const string "x"
                            end get property ret values 1
                          end operator -
                        end set by name: [x]
                        ,
                        begin set by name
                          push const number 0
                        end set by name: [y]
                        ,

[208] width = displayContent.x

                        begin set by name
                          begin get property
                            get local var displayContent (18 1)
                            push const string "x"
                          end get property ret values 1
                        end set by name: [width]
                        ,

[209] height = screenHeight

                        begin set by name
                          get local var screenHeight (4 0)
                        end set by name: [height]
                      end object
                    end params ret values 2
                  end call method ret values 0
                end scope ret values 0
              end then
            end if ret values 0


[212] if(displayContent.y > 0){

            begin if
              begin bool exp
                begin logic >
                  begin get property
                    get local var displayContent (18 1)
                    push const string "y"
                  end get property ret values 1
                  push const number 0
                end logic >
              end bool exp
              begin then

[213] ColorNode().insertTo(displayBorder).attrs{

                begin scope
                  begin call method
                    begin call method
                      begin call method
                        get local var _E (1 0)
                        begin params 1
                          push const string "ColorNode"
                        end params ret values 1
                      end call method ret values 1
                      begin params 2
                        push const string "insertTo"
                        ,
                        get local var displayBorder (17 1)
                      end params ret values 2
                    end call method ret values 1
                    begin params 2
                      push const string "attrs"
                      ,
                      begin object 6

[214] color = [0 0 0]

                        begin set by name
                          begin array 3
                            begin set auto index
                              push const number 0
                            end set auto index
                            ,
                            begin set auto index
                              push const number 0
                            end set auto index
                            ,
                            begin set auto index
                              push const number 0
                            end set auto index
                          end array
                        end set by name: [color]
                        ,

[215] anchor = [0 0]

                        begin set by name
                          begin array 2
                            begin set auto index
                              push const number 0
                            end set auto index
                            ,
                            begin set auto index
                              push const number 0
                            end set auto index
                          end array
                        end set by name: [anchor]
                        ,

[216] x = 0, y = 0

                        begin set by name
                          push const number 0
                        end set by name: [x]
                        ,
                        begin set by name
                          push const number 0
                        end set by name: [y]
                        ,

[217] width = screenWidth

                        begin set by name
                          get local var screenWidth (3 0)
                        end set by name: [width]
                        ,

[218] height = displayContent.y

                        begin set by name
                          begin get property
                            get local var displayContent (18 1)
                            push const string "y"
                          end get property ret values 1
                        end set by name: [height]
                      end object
                    end params ret values 2
                  end call method ret values 0


[220] ColorNode().insertTo(displayBorder).attrs{

                  begin call method
                    begin call method
                      begin call method
                        get local var _E (1 0)
                        begin params 1
                          push const string "ColorNode"
                        end params ret values 1
                      end call method ret values 1
                      begin params 2
                        push const string "insertTo"
                        ,
                        get local var displayBorder (17 1)
                      end params ret values 2
                    end call method ret values 1
                    begin params 2
                      push const string "attrs"
                      ,
                      begin object 6

[221] color = [0 0 0]

                        begin set by name
                          begin array 3
                            begin set auto index
                              push const number 0
                            end set auto index
                            ,
                            begin set auto index
                              push const number 0
                            end set auto index
                            ,
                            begin set auto index
                              push const number 0
                            end set auto index
                          end array
                        end set by name: [color]
                        ,

[222] anchor = [0 0]

                        begin set by name
                          begin array 2
                            begin set auto index
                              push const number 0
                            end set auto index
                            ,
                            begin set auto index
                              push const number 0
                            end set auto index
                          end array
                        end set by name: [anchor]
                        ,

[223] x = 0, y = screenHeight - displayContent.y

                        begin set by name
                          push const number 0
                        end set by name: [x]
                        ,
                        begin set by name
                          begin operator -
                            get local var screenHeight (4 0)
                            begin get property
                              get local var displayContent (18 1)
                              push const string "y"
                            end get property ret values 1
                          end operator -
                        end set by name: [y]
                        ,

[224] width = screenWidth

                        begin set by name
                          get local var screenWidth (3 0)
                        end set by name: [width]
                        ,

[225] height = displayContent.y

                        begin set by name
                          begin get property
                            get local var displayContent (18 1)
                            push const string "y"
                          end get property ret values 1
                        end set by name: [height]
                      end object
                    end params ret values 2
                  end call method ret values 0
                end scope ret values 0
              end then
            end if ret values 0
          end scope ret values 0
        end then
      end if ret values 0


[229] print"content size: "..params

      begin call method
        get local var _E (1 0)
        begin params 2
          push const string "print"
          ,
          begin operator ..
            push const string "content size: "
            get local var params (0 0 param)
          end operator ..
        end params ret values 2
      end call method ret values 0


[230] print {

      begin call method
        get local var _E (1 0)
        begin params 2
          push const string "print"
          ,
          begin object 6

[231] x = displayContent.x

            begin set by name
              begin get property
                get local var displayContent (18 1)
                push const string "x"
              end get property ret values 1
            end set by name: [x]
            ,

[232] y = displayContent.y

            begin set by name
              begin get property
                get local var displayContent (18 1)
                push const string "y"
              end get property ret values 1
            end set by name: [y]
            ,

[233] width = displayContent.width

            begin set by name
              begin get property
                get local var displayContent (18 1)
                push const string "width"
              end get property ret values 1
            end set by name: [width]
            ,

[234] height = displayContent.height

            begin set by name
              begin get property
                get local var displayContent (18 1)
                push const string "height"
              end get property ret values 1
            end set by name: [height]
            ,

[235] scaleX = displayContent.scaleX

            begin set by name
              begin get property
                get local var displayContent (18 1)
                push const string "scaleX"
              end get property ret values 1
            end set by name: [scaleX]
            ,

[236] scaleY = displayContent.scaleY

            begin set by name
              begin get property
                get local var displayContent (18 1)
                push const string "scaleY"
              end get property ret values 1
            end set by name: [scaleY]
          end object
        end params ret values 2
      end call method ret values 0
    end function
  end set env var __set@contentSize


[240] var runningScene

  begin params 1
    new local var runningScene (19 0)
  end params ret values 0


[241] function get scene(){ return runningScene }

  begin set env var
    begin function
      begin locals, total 2
        0 _E
        1 _G
      end locals
      begin return
        get local var runningScene (19 1)
      end return values 1
    end function
  end set env var __get@scene


[242] function set scene(a){

  begin set env var
    begin function
      begin locals, total 3
        0 a (param)
        1 _E
        2 _G
      end locals

[244] nextScene = a

      begin set env var
        get local var a (0 0 param)
      end set env var nextScene


[245] setNextScene()

      begin call
        get local var setNextScene (21 1)
        begin params 0
        end params ret values 0
      end call ret values 0
    end function
  end set env var __set@scene


[248] function insert(node){

  begin set env var
    begin function
      begin locals, total 3
        0 node (param)
        1 _E
        2 _G
      end locals

[249] if(runningScene && node) runningScene.insert(node)

      begin if
        begin bool exp
          begin logic &&
            get local var runningScene (19 1)
            get local var node (0 0 param)
          end logic &&
        end bool exp
        begin then
          begin call method
            get local var runningScene (19 1)
            begin params 2
              push const string "insert"
              ,
              get local var node (0 0 param)
            end params ret values 2
          end call method ret values 0
        end then
      end if ret values 0
    end function
  end set env var insert


[252] function remove(node){

  begin set env var
    begin function
      begin locals, total 3
        0 node (param)
        1 _E
        2 _G
      end locals

[253] if(runningScene && node) runningScene.remove(node)

      begin if
        begin bool exp
          begin logic &&
            get local var runningScene (19 1)
            get local var node (0 0 param)
          end logic &&
        end bool exp
        begin then
          begin call method
            get local var runningScene (19 1)
            begin params 2
              push const string "remove"
              ,
              get local var node (0 0 param)
            end params ret values 2
          end call method ret values 0
        end then
      end if ret values 0
    end function
  end set env var remove


[256] nextScene = null

  begin set env var
    const null
  end set env var nextScene


[258] director.scene = Scene()

  begin set property
    begin call method
      get local var _E (0 0)
      begin params 1
        push const string "Scene"
      end params ret values 1
    end call method ret values 1
    get local var auto create director (4 0)
    push const string "scene"
  end set property ret values 0


[260] var totalFrames = 0

  begin set local var
    push const number 0
  end set local var totalFrames (20 0)


[261] function get totalFrames(){ return totalFrames }

  begin set env var
    begin function
      begin locals, total 2
        0 _E
        1 _G
      end locals
      begin return
        get local var totalFrames (20 1)
      end return values 1
    end function
  end set env var __get@totalFrames


[263] function enableDefaultGlStates(){

  begin set env var
    begin function
      begin locals, total 2
        0 _E
        1 _G
      end locals

[264] glEnableClientState(GL_VERTEX_ARRAY)

      begin call method
        get local var _E (0 0)
        begin params 2
          push const string "glEnableClientState"
          ,
          get env var GL_VERTEX_ARRAY
        end params ret values 2
      end call method ret values 0


[265] glEnableClientState(GL_COLOR_ARRAY)

      begin call method
        get local var _E (0 0)
        begin params 2
          push const string "glEnableClientState"
          ,
          get env var GL_COLOR_ARRAY
        end params ret values 2
      end call method ret values 0


[266] glEnableClientState(GL_TEXTURE_COORD_ARRAY)

      begin call method
        get local var _E (0 0)
        begin params 2
          push const string "glEnableClientState"
          ,
          get env var GL_TEXTURE_COORD_ARRAY
        end params ret values 2
      end call method ret values 0


[267] glEnable(GL_TEXTURE_2D)

      begin call method
        get local var _E (0 0)
        begin params 2
          push const string "glEnable"
          ,
          get env var GL_TEXTURE_2D
        end params ret values 2
      end call method ret values 0
    end function
  end set env var enableDefaultGlStates


[270] function disableDefaultGlStates(){

  begin set env var
    begin function
      begin locals, total 2
        0 _E
        1 _G
      end locals

[271] glDisable(GL_TEXTURE_2D)

      begin call method
        get local var _E (0 0)
        begin params 2
          push const string "glDisable"
          ,
          get env var GL_TEXTURE_2D
        end params ret values 2
      end call method ret values 0


[272] glDisableClientState(GL_TEXTURE_COORD_ARRAY)

      begin call method
        get local var _E (0 0)
        begin params 2
          push const string "glDisableClientState"
          ,
          get env var GL_TEXTURE_COORD_ARRAY
        end params ret values 2
      end call method ret values 0


[273] glDisableClientState(GL_COLOR_ARRAY)

      begin call method
        get local var _E (0 0)
        begin params 2
          push const string "glDisableClientState"
          ,
          get env var GL_COLOR_ARRAY
        end params ret values 2
      end call method ret values 0


[274] glDisableClientState(GL_VERTEX_ARRAY)

      begin call method
        get local var _E (0 0)
        begin params 2
          push const string "glDisableClientState"
          ,
          get env var GL_VERTEX_ARRAY
        end params ret values 2
      end call method ret values 0
    end function
  end set env var disableDefaultGlStates


[277] var function setNextScene(){

  begin set local var
    begin function
      begin locals, total 2
        0 _E
        1 _G
      end locals

[278] assert(nextScene)

      begin call method
        get local var _E (0 0)
        begin params 2
          push const string "assert"
          ,
          get env var nextScene
        end params ret values 2
      end call method ret values 0


[279] displayContent.removeAll() // runningScene)

      begin call method
        get local var displayContent (18 1)
        begin params 1
          push const string "removeAll"
        end params ret values 1
      end call method ret values 0


[280] displayContent.insert(nextScene) // .attrs { zOrder = DISPLAY_SCENE_ZORDER }

      begin call method
        get local var displayContent (18 1)
        begin params 2
          push const string "insert"
          ,
          get env var nextScene
        end params ret values 2
      end call method ret values 0


[281] runningScene = nextScene

      begin set local var
        get env var nextScene
      end set local var runningScene (19 1)


[282] nextScene = null

      begin set env var
        const null
      end set env var nextScene
    end function
  end set local var setNextScene (21 0)


[285] var function paint(){

  begin set local var
    begin function
      begin locals, total 2
        0 _E
        1 _G
      end locals

[287] glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)

      begin pop
        begin code list
          begin call method
            get local var _E (0 0)
            begin params 2
              push const string "glClear"
              ,
              begin bit |
                get env var GL_COLOR_BUFFER_BIT
                get env var GL_DEPTH_BUFFER_BIT
              end bit |
            end params ret values 2
          end call method ret values 0


[289] if(nextScene) setNextScene()

          begin if
            begin bool exp
              get env var nextScene
            end bool exp
            begin then
              begin call
                get local var setNextScene (21 1)
                begin params 0
                end params ret values 0
              end call ret values 0
            end then
          end if ret values 0


[291] glPushMatrix()

          begin call method
            get local var _E (0 0)
            begin params 1
              push const string "glPushMatrix"
            end params ret values 1
          end call method ret values 0


[292] applyOrientation()

          begin call
            get local var applyOrientation (9 1)
            begin params 0
            end params ret values 0
          end call ret values 0


[295] enableDefaultGlStates()

          begin call method
            get local var _E (0 0)
            begin params 1
              push const string "enableDefaultGlStates"
            end params ret values 1
          end call method ret values 0


[298] display.handlePaint {opacity = 1}

          begin call method
            get local var display (16 1)
            begin params 2
              push const string "handlePaint"
              ,
              begin object 1
                begin set by name
                  push const number 1
                end set by name: [opacity]
              end object
            end params ret values 2
          end call method ret values 0


[300] disableDefaultGlStates()

          begin call method
            get local var _E (0 0)
            begin params 1
              push const string "disableDefaultGlStates"
            end params ret values 1
          end call method ret values 0


[302] glPopMatrix()

          begin call method
            get local var _E (0 0)
            begin params 1
              push const string "glPopMatrix"
            end params ret values 1
          end call method ret values 0


[303] glSwapBuffers()

          begin call method
            get local var _E (0 0)
            begin params 1
              push const string "glSwapBuffers"
            end params ret values 1
          end call method ret values 0


[305] ++totalFrames

          begin code list
            begin set local var
              begin operator +
                get local var totalFrames (20 1)
                push const number 1
              end operator +
            end set local var totalFrames (20 1)

            get local var totalFrames (20 1)
          end code list ret values 1
        end code list ret values 1
      end pop ret values 0
    end function
  end set local var paint (22 0)


[308] touchEvents = {}

  begin set env var
    begin object 0
    end object
  end set env var touchEvents


[309] keyEvents = {}

  begin set env var
    begin object 0
    end object
  end set env var keyEvents


[311] function handleKeys(){

  begin set env var
    begin function
      begin locals, total 14
        0 _E
        1 _G
        2 time
        3 keyEvents
      end locals

[312] var time, keyEvents = app.timeSec, {}

      begin set local var
        begin set local var
          begin params 2
            begin get property
              get local var app (3 1)
              push const string "timeSec"
            end get property ret values 1
            ,
            begin object 0
            end object
          end params ret values 2
        end set local var keyEvents (3 0)
      end set local var time (2 0)


[313] for(var id, event in app.keyEvents){

      begin scope
        begin locals 4
          4 id
          5 event
          6 #func
          7 #valid
        end locals
        new local var id (4 0)

        new local var event (5 0)

        new local var #func (6 0 temp)

        new local var #valid (7 0 temp)

        begin code list
          begin set local var
            begin call method
              begin get property
                get local var app (3 1)
                push const string "keyEvents"
              end get property ret values 1
              begin params 1
                push const string "__iter"
              end params ret values 1
            end call method ret values 1
          end set local var #func (6 0 temp)

          begin loop
            begin set local var
              begin set local var
                begin set local var
                  begin call
                    get local var #func (6 0 temp)
                    begin params 0
                    end params ret values 0
                  end call ret values 3
                end set local var event (5 0)
              end set local var id (4 0)
            end set local var #valid (7 0 temp)

            begin if
              begin bool exp
                begin logic not
                  get local var #valid (7 0 temp)
                end logic not
              end bool exp
              begin then
                break
              end then
            end if ret values 0


[314] if(!event.processed){

            begin scope
              begin if
                begin bool exp
                  begin logic not
                    begin get property
                      get local var event (5 0)
                      push const string "processed"
                    end get property ret values 1
                  end logic not
                end bool exp
                begin then

[315] keyEvents.push event

                  begin scope
                    begin call method
                      get local var keyEvents (3 0)
                      begin params 2
                        push const string "push"
                        ,
                        get local var event (5 0)
                      end params ret values 2
                    end call method ret values 0
                  end scope ret values 0
                end then
                begin else

[316] }else if(!event.pressed || time - event.processed > 30){

                  begin if
                    begin bool exp
                      begin logic ||
                        begin logic not
                          begin get property
                            get local var event (5 0)
                            push const string "pressed"
                          end get property ret values 1
                        end logic not
                        begin logic >
                          begin operator -
                            get local var time (2 0)
                            begin get property
                              get local var event (5 0)
                              push const string "processed"
                            end get property ret values 1
                          end operator -
                          push const number 30
                        end logic >
                      end logic ||
                    end bool exp
                    begin then

[318] delete app.keyEvents[id]

                      begin scope
                        begin delete
                          begin get property
                            get local var app (3 1)
                            push const string "keyEvents"
                          end get property ret values 1
                          get local var id (4 0)
                        end delete
                      end scope ret values 0
                    end then
                  end if ret values 0
                end else
              end if ret values 0
            end scope ret values 0
          end loop ret values 0
        end code list ret values 0
      end scope ret values 0


[321] for(var id, event in keyEvents){

      begin scope
        begin locals 4
          8 id
          9 event
          12 #func
          13 #valid
        end locals
        new local var id (8 0)

        new local var event (9 0)

        new local var #func (12 0 temp)

        new local var #valid (13 0 temp)

        begin code list
          begin set local var
            begin call method
              get local var keyEvents (3 0)
              begin params 1
                push const string "__iter"
              end params ret values 1
            end call method ret values 1
          end set local var #func (12 0 temp)

          begin loop
            begin set local var
              begin set local var
                begin set local var
                  begin call
                    get local var #func (12 0 temp)
                    begin params 0
                    end params ret values 0
                  end call ret values 3
                end set local var event (9 0)
              end set local var id (8 0)
            end set local var #valid (13 0 temp)

            begin if
              begin bool exp
                begin logic not
                  get local var #valid (13 0 temp)
                end logic not
              end bool exp
              begin then
                break
              end then
            end if ret values 0


[322] if(event.processed){

            begin scope
              begin if
                begin bool exp
                  begin get property
                    get local var event (9 0)
                    push const string "processed"
                  end get property ret values 1
                end bool exp
                begin then

[323] continue;

                  begin scope
                    continue
                  end scope ret values 0
                end then
              end if ret values 0


[325] event.processed = time

              begin set property
                get local var time (2 0)
                get local var auto create event (9 0)
                push const string "processed"
              end set property ret values 0


[326] if(event.captured && !event.modal){ // && touch.phase != "start"){

              begin if
                begin bool exp
                  begin logic &&
                    begin get property
                      get local var event (9 0)
                      push const string "captured"
                    end get property ret values 1
                    begin logic not
                      begin get property
                        get local var event (9 0)
                        push const string "modal"
                      end get property ret values 1
                    end logic not
                  end logic &&
                end bool exp
                begin then

[327] var cur = event.captured

                  begin scope
                    begin locals 2
                      10 cur
                      11 recursion
                    end locals
                    begin set local var
                      begin get property
                        get local var event (9 0)
                        push const string "captured"
                      end get property ret values 1
                    end set local var cur (10 0)


[328] var recursion = {[cur] = true}

                    begin set local var
                      begin object 1
                        begin set by exp
                          get local var cur (10 0)
                          const true
                        end set by exp
                      end object
                    end set local var recursion (11 0)


[329] for(;cur !== runningScene && cur.__parent;){

                    begin scope
                      nop

                      begin loop
                        begin if
                          begin bool exp
                            begin logic not
                              begin logic &&
                                begin logic !==
                                  get local var cur (10 0)
                                  get local var runningScene (19 1)
                                end logic !==
                                begin get property
                                  get local var cur (10 0)
                                  push const string "__parent"
                                end get property ret values 1
                              end logic &&
                            end logic not
                          end bool exp
                          begin then
                            break
                          end then
                        end if ret values 0


[330] cur = cur.__parent

                        begin scope
                          begin set local var
                            begin get property
                              get local var cur (10 0)
                              push const string "__parent"
                            end get property ret values 1
                          end set local var cur (10 0)


[331] if(cur in recursion) break

                          begin if
                            begin bool exp
                              begin in
                                get local var cur (10 0)
                                get local var recursion (11 0)
                              end in
                            end bool exp
                            begin then
                              break
                            end then
                          end if ret values 0


[332] recursion[cur] = true

                          begin set property by locals auto create
                            const true
                            get local var auto create recursion (11 0)
                            get local var cur (10 0)
                          end set property by locals auto create ret values 0
                        end scope ret values 0


[329] for(;cur !== runningScene && cur.__parent;){

                        nop
                      end loop ret values 0
                    end scope ret values 0


[334] if(cur === runningScene){

                    begin if
                      begin bool exp
                        begin logic ===
                          get local var cur (10 0)
                          get local var runningScene (19 1)
                        end logic ===
                      end bool exp
                      begin then

[336] event.captured.handleKeyEvent(event)

                        begin scope
                          begin call method
                            begin get property
                              get local var event (9 0)
                              push const string "captured"
                            end get property ret values 1
                            begin params 2
                              push const string "handleKeyEvent"
                              ,
                              get local var event (9 0)
                            end params ret values 2
                          end call method ret values 0


[337] if(event.captured){

                          begin if
                            begin bool exp
                              begin get property
                                get local var event (9 0)
                                push const string "captured"
                              end get property ret values 1
                            end bool exp
                            begin then

[339] continue

                              begin scope
                                continue
                              end scope ret values 0
                            end then
                          end if ret values 0
                        end scope ret values 0
                      end then
                      begin else

[343] event.captured = null

                        begin scope
                          begin set property
                            const null
                            get local var auto create event (9 0)
                            push const string "captured"
                          end set property ret values 0
                        end scope ret values 0
                      end else
                    end if ret values 0
                  end scope ret values 0
                end then
              end if ret values 0


[347] event.modal = false

              begin set property
                const false
                get local var auto create event (9 0)
                push const string "modal"
              end set property ret values 0


[349] runningScene.handleKeyEvent(event)

              begin call method
                get local var runningScene (19 1)
                begin params 2
                  push const string "handleKeyEvent"
                  ,
                  get local var event (9 0)
                end params ret values 2
              end call method ret values 0
            end scope ret values 0
          end loop ret values 0
        end code list ret values 0
      end scope ret values 0
    end function
  end set env var handleKeys


[354] function handleTouches(){

  begin set env var
    begin function
      begin locals, total 15
        0 _E
        1 _G
        2 time
        3 orientation
        4 touchEvents
      end locals

[355] var time, orientation, touchEvents = app.timeSec, app.orientation, {}

      begin set local var
        begin set local var
          begin set local var
            begin params 3
              begin get property
                get local var app (3 1)
                push const string "timeSec"
              end get property ret values 1
              ,
              begin get property
                get local var app (3 1)
                push const string "orientation"
              end get property ret values 1
              ,
              begin object 0
              end object
            end params ret values 3
          end set local var touchEvents (4 0)
        end set local var orientation (3 0)
      end set local var time (2 0)


[356] for(var id, touch in app.touchEvents){

      begin scope
        begin locals 4
          5 id
          6 touch
          7 #func
          8 #valid
        end locals
        new local var id (5 0)

        new local var touch (6 0)

        new local var #func (7 0 temp)

        new local var #valid (8 0 temp)

        begin code list
          begin set local var
            begin call method
              begin get property
                get local var app (3 1)
                push const string "touchEvents"
              end get property ret values 1
              begin params 1
                push const string "__iter"
              end params ret values 1
            end call method ret values 1
          end set local var #func (7 0 temp)

          begin loop
            begin set local var
              begin set local var
                begin set local var
                  begin call
                    get local var #func (7 0 temp)
                    begin params 0
                    end params ret values 0
                  end call ret values 3
                end set local var touch (6 0)
              end set local var id (5 0)
            end set local var #valid (8 0 temp)

            begin if
              begin bool exp
                begin logic not
                  get local var #valid (8 0 temp)
                end logic not
              end bool exp
              begin then
                break
              end then
            end if ret values 0


[357] if(!touch.processed){

            begin scope
              begin if
                begin bool exp
                  begin logic not
                    begin get property
                      get local var touch (6 0)
                      push const string "processed"
                    end get property ret values 1
                  end logic not
                end bool exp
                begin then

[358] if(orientation == ORIENTATION_PORTRAIT){

                  begin scope
                    begin if
                      begin bool exp
                        begin logic ==
                          get local var orientation (3 0)
                          get env var ORIENTATION_PORTRAIT
                        end logic ==
                      end bool exp
                      begin then

[360] }else if(orientation == ORIENTATION_PORTRAIT_UPSIDE_DOWN){

                        begin scope
                        end scope ret values 0
                      end then
                      begin else
                        begin if
                          begin bool exp
                            begin logic ==
                              get local var orientation (3 0)
                              get env var ORIENTATION_PORTRAIT_UPSIDE_DOWN
                            end logic ==
                          end bool exp
                          begin then

[361] touch.x = contentWidth - touch.x

                            begin scope
                              begin set property
                                begin operator -
                                  get local var contentWidth (13 1)
                                  begin get property
                                    get local var touch (6 0)
                                    push const string "x"
                                  end get property ret values 1
                                end operator -
                                get local var auto create touch (6 0)
                                push const string "x"
                              end set property ret values 0
                            end scope ret values 0
                          end then
                          begin else

[362] }else if(orientation == ORIENTATION_LANDSCAPE_LEFT){

                            begin if
                              begin bool exp
                                begin logic ==
                                  get local var orientation (3 0)
                                  get env var ORIENTATION_LANDSCAPE_LEFT
                                end logic ==
                              end bool exp
                              begin then

[364] touch.x, touch.y = contentHeight - touch.y, touch.x

                                begin scope
                                  begin set property
                                    begin set property
                                      begin params 2
                                        begin operator -
                                          get local var contentHeight (14 1)
                                          begin get property
                                            get local var touch (6 0)
                                            push const string "y"
                                          end get property ret values 1
                                        end operator -
                                        ,
                                        begin get property
                                          get local var touch (6 0)
                                          push const string "x"
                                        end get property ret values 1
                                      end params ret values 2
                                      get local var auto create touch (6 0)
                                      push const string "y"
                                    end set property ret values 1
                                    get local var auto create touch (6 0)
                                    push const string "x"
                                  end set property ret values 0
                                end scope ret values 0
                              end then
                              begin else

[365] }else if(orientation == ORIENTATION_LANDSCAPE_RIGHT){

                                begin if
                                  begin bool exp
                                    begin logic ==
                                      get local var orientation (3 0)
                                      get env var ORIENTATION_LANDSCAPE_RIGHT
                                    end logic ==
                                  end bool exp
                                  begin then

[367] touch.x, touch.y = touch.y, contentWidth - touch.x

                                    begin scope
                                      begin set property
                                        begin set property
                                          begin params 2
                                            begin get property
                                              get local var touch (6 0)
                                              push const string "y"
                                            end get property ret values 1
                                            ,
                                            begin operator -
                                              get local var contentWidth (13 1)
                                              begin get property
                                                get local var touch (6 0)
                                                push const string "x"
                                              end get property ret values 1
                                            end operator -
                                          end params ret values 2
                                          get local var auto create touch (6 0)
                                          push const string "y"
                                        end set property ret values 1
                                        get local var auto create touch (6 0)
                                        push const string "x"
                                      end set property ret values 0
                                    end scope ret values 0
                                  end then
                                end if ret values 0
                              end else
                            end if ret values 0
                          end else
                        end if ret values 0
                      end else
                    end if ret values 0


[369] touch.nativeX, touch.nativeY = touch.x, touch.y

                    begin set property
                      begin set property
                        begin params 2
                          begin get property
                            get local var touch (6 0)
                            push const string "x"
                          end get property ret values 1
                          ,
                          begin get property
                            get local var touch (6 0)
                            push const string "y"
                          end get property ret values 1
                        end params ret values 2
                        get local var auto create touch (6 0)
                        push const string "nativeY"
                      end set property ret values 1
                      get local var auto create touch (6 0)
                      push const string "nativeX"
                    end set property ret values 0


[370] touchEvents.push touch

                    begin call method
                      get local var touchEvents (4 0)
                      begin params 2
                        push const string "push"
                        ,
                        get local var touch (6 0)
                      end params ret values 2
                    end call method ret values 0
                  end scope ret values 0
                end then
                begin else

[371] }else if(touch.phase == "end" || touch.phase == "cancel" || time - touch.processed > 30){

                  begin if
                    begin bool exp
                      begin logic ||
                        begin logic ||
                          begin logic ==
                            begin get property
                              get local var touch (6 0)
                              push const string "phase"
                            end get property ret values 1
                            push const string "end"
                          end logic ==
                          begin logic ==
                            begin get property
                              get local var touch (6 0)
                              push const string "phase"
                            end get property ret values 1
                            push const string "cancel"
                          end logic ==
                        end logic ||
                        begin logic >
                          begin operator -
                            get local var time (2 0)
                            begin get property
                              get local var touch (6 0)
                              push const string "processed"
                            end get property ret values 1
                          end operator -
                          push const number 30
                        end logic >
                      end logic ||
                    end bool exp
                    begin then

[373] delete app.touchEvents[id]

                      begin scope
                        begin delete
                          begin get property
                            get local var app (3 1)
                            push const string "touchEvents"
                          end get property ret values 1
                          get local var id (5 0)
                        end delete
                      end scope ret values 0
                    end then
                  end if ret values 0
                end else
              end if ret values 0
            end scope ret values 0
          end loop ret values 0
        end code list ret values 0
      end scope ret values 0


[376] for(var id, touch in touchEvents){

      begin scope
        begin locals 4
          9 id
          10 touch
          13 #func
          14 #valid
        end locals
        new local var id (9 0)

        new local var touch (10 0)

        new local var #func (13 0 temp)

        new local var #valid (14 0 temp)

        begin code list
          begin set local var
            begin call method
              get local var touchEvents (4 0)
              begin params 1
                push const string "__iter"
              end params ret values 1
            end call method ret values 1
          end set local var #func (13 0 temp)

          begin loop
            begin set local var
              begin set local var
                begin set local var
                  begin call
                    get local var #func (13 0 temp)
                    begin params 0
                    end params ret values 0
                  end call ret values 3
                end set local var touch (10 0)
              end set local var id (9 0)
            end set local var #valid (14 0 temp)

            begin if
              begin bool exp
                begin logic not
                  get local var #valid (14 0 temp)
                end logic not
              end bool exp
              begin then
                break
              end then
            end if ret values 0


[377] if(touch.processed){

            begin scope
              begin if
                begin bool exp
                  begin get property
                    get local var touch (10 0)
                    push const string "processed"
                  end get property ret values 1
                end bool exp
                begin then

[378] continue;

                  begin scope
                    continue
                  end scope ret values 0
                end then
              end if ret values 0


[380] touch.processed = time

              begin set property
                get local var time (2 0)
                get local var auto create touch (10 0)
                push const string "processed"
              end set property ret values 0


[381] if(touch.captured && !touch.modal){ // && touch.phase != "start"){

              begin if
                begin bool exp
                  begin logic &&
                    begin get property
                      get local var touch (10 0)
                      push const string "captured"
                    end get property ret values 1
                    begin logic not
                      begin get property
                        get local var touch (10 0)
                        push const string "modal"
                      end get property ret values 1
                    end logic not
                  end logic &&
                end bool exp
                begin then

[382] var cur = touch.captured

                  begin scope
                    begin locals 2
                      11 cur
                      12 recursion
                    end locals
                    begin set local var
                      begin get property
                        get local var touch (10 0)
                        push const string "captured"
                      end get property ret values 1
                    end set local var cur (11 0)


[383] var recursion = {[cur] = true}

                    begin set local var
                      begin object 1
                        begin set by exp
                          get local var cur (11 0)
                          const true
                        end set by exp
                      end object
                    end set local var recursion (12 0)


[384] for(;cur !== runningScene && cur.__parent;){

                    begin scope
                      nop

                      begin loop
                        begin if
                          begin bool exp
                            begin logic not
                              begin logic &&
                                begin logic !==
                                  get local var cur (11 0)
                                  get local var runningScene (19 1)
                                end logic !==
                                begin get property
                                  get local var cur (11 0)
                                  push const string "__parent"
                                end get property ret values 1
                              end logic &&
                            end logic not
                          end bool exp
                          begin then
                            break
                          end then
                        end if ret values 0


[385] cur = cur.__parent

                        begin scope
                          begin set local var
                            begin get property
                              get local var cur (11 0)
                              push const string "__parent"
                            end get property ret values 1
                          end set local var cur (11 0)


[386] if(cur in recursion) break

                          begin if
                            begin bool exp
                              begin in
                                get local var cur (11 0)
                                get local var recursion (12 0)
                              end in
                            end bool exp
                            begin then
                              break
                            end then
                          end if ret values 0


[387] recursion[cur] = true

                          begin set property by locals auto create
                            const true
                            get local var auto create recursion (12 0)
                            get local var cur (11 0)
                          end set property by locals auto create ret values 0
                        end scope ret values 0


[384] for(;cur !== runningScene && cur.__parent;){

                        nop
                      end loop ret values 0
                    end scope ret values 0


[389] if(cur === runningScene){

                    begin if
                      begin bool exp
                        begin logic ===
                          get local var cur (11 0)
                          get local var runningScene (19 1)
                        end logic ===
                      end bool exp
                      begin then

[391] touch.captured.handleTouch(touch)

                        begin scope
                          begin call method
                            begin get property
                              get local var touch (10 0)
                              push const string "captured"
                            end get property ret values 1
                            begin params 2
                              push const string "handleTouch"
                              ,
                              get local var touch (10 0)
                            end params ret values 2
                          end call method ret values 0


[392] if(touch.captured){

                          begin if
                            begin bool exp
                              begin get property
                                get local var touch (10 0)
                                push const string "captured"
                              end get property ret values 1
                            end bool exp
                            begin then

[394] continue

                              begin scope
                                continue
                              end scope ret values 0
                            end then
                          end if ret values 0
                        end scope ret values 0
                      end then
                      begin else

[398] touch.captured = null

                        begin scope
                          begin set property
                            const null
                            get local var auto create touch (10 0)
                            push const string "captured"
                          end set property ret values 0
                        end scope ret values 0
                      end else
                    end if ret values 0
                  end scope ret values 0
                end then
              end if ret values 0


[402] touch.modal = false

              begin set property
                const false
                get local var auto create touch (10 0)
                push const string "modal"
              end set property ret values 0


[404] runningScene.handleTouch(touch)

              begin call method
                get local var runningScene (19 1)
                begin params 2
                  push const string "handleTouch"
                  ,
                  get local var touch (10 0)
                end params ret values 2
              end call method ret values 0
            end scope ret values 0
          end loop ret values 0
        end code list ret values 0
      end scope ret values 0
    end function
  end set env var handleTouches


[409] var deltaTime = 0.01

  begin set local var
    push const number 0.01
  end set local var deltaTime (23 0)


[410] function get deltaTime(){return deltaTime}

  begin set env var
    begin function
      begin locals, total 2
        0 _E
        1 _G
      end locals
      begin return
        get local var deltaTime (23 1)
      end return values 1
    end function
  end set env var __get@deltaTime


[412] var timeSpeed = 1

  begin set local var
    push const number 1
  end set local var timeSpeed (24 0)


[413] function get timeSpeed(){return timeSpeed}

  begin set env var
    begin function
      begin locals, total 2
        0 _E
        1 _G
      end locals
      begin return
        get local var timeSpeed (24 1)
      end return values 1
    end function
  end set env var __get@timeSpeed


[414] function set timeSpeed(a){ timeSpeed = a }

  begin set env var
    begin function
      begin locals, total 3
        0 a (param)
        1 _E
        2 _G
      end locals
      begin set local var
        get local var a (0 0 param)
      end set local var timeSpeed (24 1)
    end function
  end set env var __set@timeSpeed


[416] var time = 0

  begin set local var
    push const number 0
  end set local var time (25 0)


[417] function get time(){return time}

  begin set env var
    begin function
      begin locals, total 2
        0 _E
        1 _G
      end locals
      begin return
        get local var time (25 1)
      end return values 1
    end function
  end set env var __get@time


[418] function set time(a){ time = a }

  begin set env var
    begin function
      begin locals, total 3
        0 a (param)
        1 _E
        2 _G
      end locals
      begin set local var
        get local var a (0 0 param)
      end set local var time (25 1)
    end function
  end set env var __set@time


[420] var prevAppTime = 0

  begin set local var
    push const number 0
  end set local var prevAppTime (26 0)


[421] var prevDeltaTime = 0

  begin set local var
    push const number 0
  end set local var prevDeltaTime (27 0)


[423] var function clamp(a, min, max){

  begin set local var
    begin function
      begin locals, total 5
        0 a (param)
        1 min (param)
        2 max (param)
        3 _E
        4 _G
      end locals

[424] if(a < min) return min

      begin if
        begin bool exp
          begin binary operator by locals
            begin logic <
              get local var a (0 0 param)
              get local var min (1 0 param)
            end logic <
          end binary operator by locals
        end bool exp
        begin then
          begin code list
            begin return
              get local var min (1 0 param)
            end return values 1
          end code list ret values 0
        end then
      end if ret values 0


[425] if(a > max) return max

      begin if
        begin bool exp
          begin binary operator by locals
            begin logic >
              get local var a (0 0 param)
              get local var max (2 0 param)
            end logic >
          end binary operator by locals
        end bool exp
        begin then
          begin code list
            begin return
              get local var max (2 0 param)
            end return values 1
          end code list ret values 0
        end then
      end if ret values 0


[426] return a

      begin code list
        begin return
          get local var a (0 0 param)
        end return values 1
      end code list ret values 0
    end function
  end set local var clamp (28 0)


[429] var coreTriggerEvent = core.triggerEvent

  begin set local var
    begin get property
      get local var core (2 0)
      push const string "triggerEvent"
    end get property ret values 1
  end set local var coreTriggerEvent (29 0)


[430] function core.triggerEvent(eventName, params){

  begin set property
    begin function
      begin locals, total 6
        0 eventName (param)
        1 params (param)
        2 _E
        3 _G
      end locals

[431] if(eventName == "enterFrame"){

      begin if
        begin bool exp
          begin logic ==
            get local var eventName (0 0 param)
            push const string "enterFrame"
          end logic ==
        end bool exp
        begin then

[433] var appTime = app.timeSec

          begin scope
            begin locals 2
              4 appTime
              5 updateParams
            end locals
            begin set local var
              begin get property
                get local var app (3 1)
                push const string "timeSec"
              end get property ret values 1
            end set local var appTime (4 0)


[434] deltaTime = (appTime - prevAppTime) * timeSpeed

            begin set local var
              begin operator *
                begin operator -
                  get local var appTime (4 0)
                  get local var prevAppTime (26 1)
                end operator -
                get local var timeSpeed (24 1)
              end operator *
            end set local var deltaTime (23 1)


[435] prevAppTime = appTime

            begin set local var
              get local var appTime (4 0)
            end set local var prevAppTime (26 1)


[436] deltaTime = clamp(deltaTime, prevDeltaTime*0.9, prevDeltaTime*1.1)

            begin set local var
              begin call
                get local var clamp (28 1)
                begin params 3
                  get local var deltaTime (23 1)
                  ,
                  begin operator *
                    get local var prevDeltaTime (27 1)
                    push const number 0.9
                  end operator *
                  ,
                  begin operator *
                    get local var prevDeltaTime (27 1)
                    push const number 1.1
                  end operator *
                end params ret values 3
              end call ret values 1
            end set local var deltaTime (23 1)


[437] deltaTime = clamp(deltaTime, 0.01, 0.1)

            begin set local var
              begin call
                get local var clamp (28 1)
                begin params 3
                  get local var deltaTime (23 1)
                  ,
                  push const number 0.01
                  ,
                  push const number 0.1
                end params ret values 3
              end call ret values 1
            end set local var deltaTime (23 1)


[438] prevDeltaTime = deltaTime

            begin set local var
              get local var deltaTime (23 1)
            end set local var prevDeltaTime (27 1)


[439] time = time + deltaTime

            begin set local var
              begin operator +
                get local var time (25 1)
                get local var deltaTime (23 1)
              end operator +
            end set local var time (25 1)


[441] var updateParams = {deltaTime = deltaTime}

            begin set local var
              begin object 1
                begin set by name
                  get local var deltaTime (23 1)
                end set by name: [deltaTime]
              end object
            end set local var updateParams (5 0)


[442] coreTriggerEvent.call(core, eventName, updateParams)

            begin call method
              get local var coreTriggerEvent (29 1)
              begin params 4
                push const string "call"
                ,
                get local var core (2 1)
                ,
                get local var eventName (0 0 param)
                ,
                get local var updateParams (5 0)
              end params ret values 4
            end call method ret values 0


[443] handleTouches()

            begin call method
              get local var _E (2 0)
              begin params 1
                push const string "handleTouches"
              end params ret values 1
            end call method ret values 0


[444] handleKeys()

            begin call method
              get local var _E (2 0)
              begin params 1
                push const string "handleKeys"
              end params ret values 1
            end call method ret values 0


[446] if(runningScene) runningScene.handleUpdate(updateParams)

            begin if
              begin bool exp
                get local var runningScene (19 1)
              end bool exp
              begin then
                begin call method
                  get local var runningScene (19 1)
                  begin params 2
                    push const string "handleUpdate"
                    ,
                    get local var updateParams (5 0)
                  end params ret values 2
                end call method ret values 0
              end then
            end if ret values 0


[448] paint()

            begin call
              get local var paint (22 1)
              begin params 0
              end params ret values 0
            end call ret values 0
          end scope ret values 0
        end then
        begin else

[450] coreTriggerEvent.call(core, eventName, params)

          begin scope
            begin call method
              get local var coreTriggerEvent (29 1)
              begin params 4
                push const string "call"
                ,
                get local var core (2 1)
                ,
                get local var eventName (0 0 param)
                ,
                get local var params (1 0 param)
              end params ret values 4
            end call method ret values 0


[451] if(runningScene) runningScene.triggerEvent(eventName, params)

            begin if
              begin bool exp
                get local var runningScene (19 1)
              end bool exp
              begin then
                begin call method
                  get local var runningScene (19 1)
                  begin params 3
                    push const string "triggerEvent"
                    ,
                    get local var eventName (0 0 param)
                    ,
                    get local var params (1 0 param)
                  end params ret values 3
                end call method ret values 0
              end then
            end if ret values 0
          end scope ret values 0
        end else
      end if ret values 0
    end function

[430] function core.triggerEvent(eventName, params){

    get local var auto create core (2 0)
    push const string "triggerEvent"
  end set property ret values 0


[453] }

  begin code list
    begin return
      get local var _E (0 0)
    end return values 1
  end code list ret values 0
end function
