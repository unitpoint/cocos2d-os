
[FILE] raw://../prog-os/main.os
[1] var core = require("core")

begin function
  begin locals, total 8
    0 _E
    1 _G
    2 core
    3 app
    4 node
    5 image
    6 text
    7 director
  end locals
  begin set local var
    begin call method
      get local var _E (0 0)
      begin params 2
        push const string "require"
        ,
        push const string "core"
      end params ret values 2
    end call method ret values 1
  end set local var core (2 0)


[2] var app = require("app")

  begin set local var
    begin call method
      get local var _E (0 0)
      begin params 2
        push const string "require"
        ,
        push const string "app"
      end params ret values 2
    end call method ret values 1
  end set local var app (3 0)


[3] var node = require("node")

  begin set local var
    begin call method
      get local var _E (0 0)
      begin params 2
        push const string "require"
        ,
        push const string "node"
      end params ret values 2
    end call method ret values 1
  end set local var node (4 0)


[4] var image = require("image")

  begin set local var
    begin call method
      get local var _E (0 0)
      begin params 2
        push const string "require"
        ,
        push const string "image"
      end params ret values 2
    end call method ret values 1
  end set local var image (5 0)


[5] var text = require("text")

  begin set local var
    begin call method
      get local var _E (0 0)
      begin params 2
        push const string "require"
        ,
        push const string "text"
      end params ret values 2
    end call method ret values 1
  end set local var text (6 0)


[6] var director = require("director")

  begin set local var
    begin call method
      get local var _E (0 0)
      begin params 2
        push const string "require"
        ,
        push const string "director"
      end params ret values 2
    end call method ret values 1
  end set local var director (7 0)


[8] print "Hello World!"

  begin call method
    get local var _E (0 0)
    begin params 2
      push const string "print"
      ,
      push const string "Hello World!"
    end params ret values 2
  end call method ret values 0


[10] print "Sprite\n"..Sprite

  begin call method
    get local var _E (0 0)
    begin params 2
      push const string "print"
      ,
      begin operator ..
        push const string "Sprite
"
        get env var Sprite
      end operator ..
    end params ret values 2
  end call method ret values 0


[15] addEventListener("enterFrame", function(){

  begin call method
    get local var _E (0 0)
    begin params 4
      push const string "addEventListener"
      ,
      push const string "enterFrame"
      ,
      begin function
        begin locals, total 2
          0 _E
          1 _G
        end locals
      end function
      ,

[17] }, true)

      const true
    end params ret values 4
  end call method ret values 0


[19] MyColorNode = extends ColorNode {

  begin set env var
    begin extends
      get env var ColorNode
      begin object 3

[20] __object = {

        begin set by name
          begin object 4

[21] speed = 0.5

            begin set by name
              push const number 0.5
            end set by name: [speed]
            ,

[22] dx = 1

            begin set by name
              push const number 1
            end set by name: [dx]
            ,

[23] dy = 1

            begin set by name
              push const number 1
            end set by name: [dy]
            ,

[24] touched = false

            begin set by name
              const false
            end set by name: [touched]
          end object
        end set by name: [__object]
        ,

[27] __construct = function(){

        begin set by name
          begin function
            begin locals, total 9
              0 _E
              1 _G
              2 self
              3 timer
              4 changeDir
              5 tx
              6 ty
              7 sx
              8 sy
            end locals

[28] super()

            begin call
              super
              begin params 0
              end params ret values 0
            end call ret values 0


[30] var self, timer = this

            begin set local var
              begin set local var
                begin params 2
                  push this
                  ,
                  const null
                end params ret values 2
              end set local var timer (3 0)
            end set local var self (2 0)


[31] var function changeDir(){

            begin set local var
              begin function
                begin locals, total 2
                  0 _E
                  1 _G
                end locals

[33] self.dx = math.random(-1 1)

                begin set property
                  begin call method
                    get env var math
                    begin params 3
                      push const string "random"
                      ,
                      begin neg
                        push const number 1
                      end neg
                      ,
                      push const number 1
                    end params ret values 3
                  end call method ret values 1
                  get local var auto create self (2 1)
                  push const string "dx"
                end set property ret values 0


[34] self.dy = math.random(-1 1)

                begin set property
                  begin call method
                    get env var math
                    begin params 3
                      push const string "random"
                      ,
                      begin neg
                        push const number 1
                      end neg
                      ,
                      push const number 1
                    end params ret values 3
                  end call method ret values 1
                  get local var auto create self (2 1)
                  push const string "dy"
                end set property ret values 0


[36] timer = self.setTimeout(changeDir, math.random(3.0 5.0))

                begin set local var
                  begin call method
                    get local var self (2 1)
                    begin params 3
                      push const string "setTimeout"
                      ,
                      get local var changeDir (4 1)
                      ,
                      begin call method
                        get env var math
                        begin params 3
                          push const string "random"
                          ,
                          push const number 3.0
                          ,
                          push const number 5.0
                        end params ret values 3
                      end call method ret values 1
                    end params ret values 3
                  end call method ret values 1
                end set local var timer (3 1)
              end function
            end set local var changeDir (4 0)


[38] changeDir()

            begin call
              get local var changeDir (4 0)
              begin params 0
              end params ret values 0
            end call ret values 0


[40] this.addEventListener("enterFrame", function(params){

            begin call method
              push this
              begin params 3
                push const string "addEventListener"
                ,
                push const string "enterFrame"
                ,
                begin function
                  begin locals, total 3
                    0 params (param)
                    1 _E
                    2 _G
                  end locals

[41] this.update(params)

                  begin call method
                    push this
                    begin params 2
                      push const string "update"
                      ,
                      get local var params (0 0 param)
                    end params ret values 2
                  end call method ret values 0
                end function
              end params ret values 3
            end call method ret values 0


[44] var tx, ty, sx, sy

            begin params 4
              new local var tx (5 0)
              ,
              new local var ty (6 0)
              ,
              new local var sx (7 0)
              ,
              new local var sy (8 0)
            end params ret values 0


[45] this.addEventListener("touch", function(touch){

            begin call method
              push this
              begin params 3
                push const string "addEventListener"
                ,
                push const string "touch"
                ,
                begin function
                  begin locals, total 3
                    0 touch (param)
                    1 _E
                    2 _G
                  end locals

[46] if(touch.phase == "start"){

                  begin if
                    begin bool exp
                      begin logic ==
                        begin get property
                          get local var touch (0 0 param)
                          push const string "phase"
                        end get property ret values 1
                        push const string "start"
                      end logic ==
                    end bool exp
                    begin then

[47] tx, ty, sx, sy = touch.x, touch.y, self.x, self.y

                      begin scope
                        begin set local var
                          begin set local var
                            begin set local var
                              begin set local var
                                begin params 4
                                  begin get property
                                    get local var touch (0 0 param)
                                    push const string "x"
                                  end get property ret values 1
                                  ,
                                  begin get property
                                    get local var touch (0 0 param)
                                    push const string "y"
                                  end get property ret values 1
                                  ,
                                  begin get property
                                    get local var self (2 1)
                                    push const string "x"
                                  end get property ret values 1
                                  ,
                                  begin get property
                                    get local var self (2 1)
                                    push const string "y"
                                  end get property ret values 1
                                end params ret values 4
                              end set local var sy (8 1)
                            end set local var sx (7 1)
                          end set local var ty (6 1)
                        end set local var tx (5 1)


[48] self.touched = true

                        begin set property
                          const true
                          get local var auto create self (2 1)
                          push const string "touched"
                        end set property ret values 0


[49] self.zOrder = 1

                        begin set property
                          push const number 1
                          get local var auto create self (2 1)
                          push const string "zOrder"
                        end set property ret values 0


[50] self.clearTimeout(timer)

                        begin call method
                          get local var self (2 1)
                          begin params 2
                            push const string "clearTimeout"
                            ,
                            get local var timer (3 1)
                          end params ret values 2
                        end call method ret values 0
                      end scope ret values 0
                    end then
                    begin else

[51] }else if(touch.phase == "move"){

                      begin if
                        begin bool exp
                          begin logic ==
                            begin get property
                              get local var touch (0 0 param)
                              push const string "phase"
                            end get property ret values 1
                            push const string "move"
                          end logic ==
                        end bool exp
                        begin then

[52] self.x, self.y = sx + touch.x - tx, sy + touch.y - ty

                          begin scope
                            begin set property
                              begin set property
                                begin params 2
                                  begin operator -
                                    begin operator +
                                      get local var sx (7 1)
                                      begin get property
                                        get local var touch (0 0 param)
                                        push const string "x"
                                      end get property ret values 1
                                    end operator +
                                    get local var tx (5 1)
                                  end operator -
                                  ,
                                  begin operator -
                                    begin operator +
                                      get local var sy (8 1)
                                      begin get property
                                        get local var touch (0 0 param)
                                        push const string "y"
                                      end get property ret values 1
                                    end operator +
                                    get local var ty (6 1)
                                  end operator -
                                end params ret values 2
                                get local var auto create self (2 1)
                                push const string "y"
                              end set property ret values 1
                              get local var auto create self (2 1)
                              push const string "x"
                            end set property ret values 0
                          end scope ret values 0
                        end then
                        begin else

[53] }else if(touch.phase == "end"){

                          begin if
                            begin bool exp
                              begin logic ==
                                begin get property
                                  get local var touch (0 0 param)
                                  push const string "phase"
                                end get property ret values 1
                                push const string "end"
                              end logic ==
                            end bool exp
                            begin then

[54] self.touched = false

                              begin scope
                                begin set property
                                  const false
                                  get local var auto create self (2 1)
                                  push const string "touched"
                                end set property ret values 0


[55] self.zOrder = 0

                                begin set property
                                  push const number 0
                                  get local var auto create self (2 1)
                                  push const string "zOrder"
                                end set property ret values 0


[56] changeDir()

                                begin call
                                  get local var changeDir (4 1)
                                  begin params 0
                                  end params ret values 0
                                end call ret values 0
                              end scope ret values 0
                            end then
                          end if ret values 0
                        end else
                      end if ret values 0
                    end else
                  end if ret values 0
                end function
              end params ret values 3
            end call method ret values 0
          end function
        end set by name: [__construct]
        ,

[61] update = function(params){

        begin set by name
          begin function
            begin locals, total 5
              0 params (param)
              1 _E
              2 _G
              3 offs
              4 clamp
            end locals

[62] if(this.touched) return;

            begin if
              begin bool exp
                begin get property
                  push this
                  push const string "touched"
                end get property ret values 1
              end bool exp
              begin then
                return
              end then
            end if ret values 0


[64] var offs = director.width * this.speed * params.deltaTime

            begin set local var
              begin operator *
                begin operator *
                  begin get property
                    get local var director (7 1)
                    push const string "width"
                  end get property ret values 1
                  begin get property
                    push this
                    push const string "speed"
                  end get property ret values 1
                end operator *
                begin get property
                  get local var params (0 0 param)
                  push const string "deltaTime"
                end get property ret values 1
              end operator *
            end set local var offs (3 0)


[66] this.x = this.x + this.dx * offs

            begin set property
              begin operator +
                begin get property
                  push this
                  push const string "x"
                end get property ret values 1
                begin operator *
                  begin get property
                    push this
                    push const string "dx"
                  end get property ret values 1
                  get local var offs (3 0)
                end operator *
              end operator +
              push this
              push const string "x"
            end set property ret values 0


[67] this.y = this.y + this.dy * offs

            begin set property
              begin operator +
                begin get property
                  push this
                  push const string "y"
                end get property ret values 1
                begin operator *
                  begin get property
                    push this
                    push const string "dy"
                  end get property ret values 1
                  get local var offs (3 0)
                end operator *
              end operator +
              push this
              push const string "y"
            end set property ret values 0


[69] var function clamp(a min max){

            begin set local var
              begin function
                begin locals, total 5
                  0 a (param)
                  1 min (param)
                  2 max (param)
                  3 _E
                  4 _G
                end locals

[70] if(a < min) return min

                begin if
                  begin bool exp
                    begin logic <
                      get local var a (0 0 param)
                      get local var min (1 0 param)
                    end logic <
                  end bool exp
                  begin then
                    begin code list
                      begin return
                        get local var min (1 0 param)
                      end return values 1
                    end code list ret values 0
                  end then
                end if ret values 0


[71] if(a > max) return max

                begin if
                  begin bool exp
                    begin logic >
                      get local var a (0 0 param)
                      get local var max (2 0 param)
                    end logic >
                  end bool exp
                  begin then
                    begin code list
                      begin return
                        get local var max (2 0 param)
                      end return values 1
                    end code list ret values 0
                  end then
                end if ret values 0


[72] return a

                begin code list
                  begin return
                    get local var a (0 0 param)
                  end return values 1
                end code list ret values 0
              end function
            end set local var clamp (4 0)


[75] if(this.x < 0 || this.x > this.__parent.width){

            begin if
              begin bool exp
                begin logic ||
                  begin logic <
                    begin get property
                      push this
                      push const string "x"
                    end get property ret values 1
                    push const number 0
                  end logic <
                  begin logic >
                    begin get property
                      push this
                      push const string "x"
                    end get property ret values 1
                    begin get property
                      begin get property
                        push this
                        push const string "__parent"
                      end get property ret values 1
                      push const string "width"
                    end get property ret values 1
                  end logic >
                end logic ||
              end bool exp
              begin then

[76] this.dx = -this.dx

                begin scope
                  begin set property
                    begin neg
                      begin get property
                        push this
                        push const string "dx"
                      end get property ret values 1
                    end neg
                    push this
                    push const string "dx"
                  end set property ret values 0


[77] this.x = clamp(this.x, 0, this.__parent.width)

                  begin set property
                    begin call
                      get local var clamp (4 0)
                      begin params 3
                        begin get property
                          push this
                          push const string "x"
                        end get property ret values 1
                        ,
                        push const number 0
                        ,
                        begin get property
                          begin get property
                            push this
                            push const string "__parent"
                          end get property ret values 1
                          push const string "width"
                        end get property ret values 1
                      end params ret values 3
                    end call ret values 1
                    push this
                    push const string "x"
                  end set property ret values 0
                end scope ret values 0
              end then
            end if ret values 0


[79] if(this.y < 0 || this.y > this.__parent.height){

            begin if
              begin bool exp
                begin logic ||
                  begin logic <
                    begin get property
                      push this
                      push const string "y"
                    end get property ret values 1
                    push const number 0
                  end logic <
                  begin logic >
                    begin get property
                      push this
                      push const string "y"
                    end get property ret values 1
                    begin get property
                      begin get property
                        push this
                        push const string "__parent"
                      end get property ret values 1
                      push const string "height"
                    end get property ret values 1
                  end logic >
                end logic ||
              end bool exp
              begin then

[80] this.dy = -this.dy

                begin scope
                  begin set property
                    begin neg
                      begin get property
                        push this
                        push const string "dy"
                      end get property ret values 1
                    end neg
                    push this
                    push const string "dy"
                  end set property ret values 0


[81] this.y = clamp(this.y, 0, this.__parent.height)

                  begin set property
                    begin call
                      get local var clamp (4 0)
                      begin params 3
                        begin get property
                          push this
                          push const string "y"
                        end get property ret values 1
                        ,
                        push const number 0
                        ,
                        begin get property
                          begin get property
                            push this
                            push const string "__parent"
                          end get property ret values 1
                          push const string "height"
                        end get property ret values 1
                      end params ret values 3
                    end call ret values 1
                    push this
                    push const string "y"
                  end set property ret values 0
                end scope ret values 0
              end then
            end if ret values 0
          end function
        end set by name: [update]
      end object
    end extends ret values 1
  end set env var MyColorNode


[86] MyScene = extends Scene {

  begin set env var
    begin extends
      get env var Scene
      begin object 1

[87] __construct = function(){

        begin set by name
          begin function
            begin locals, total 31
              0 _E
              1 _G
              2 color
              3 message
              4 font
              5 fps
              6 gcAllocatedBytes
              7 gcUsedBytes
              8 gcCachedBytes
              9 gcNumObjects
              16 scene
            end locals

[88] super()

            begin call
              super
              begin params 0
              end params ret values 0
            end call ret values 0


[89] glClearColor(0.2 0.2 0.2 1)

            begin call method
              get local var _E (0 0)
              begin params 5
                push const string "glClearColor"
                ,
                push const number 0.2
                ,
                push const number 0.2
                ,
                push const number 0.2
                ,
                push const number 1
              end params ret values 5
            end call method ret values 0


[91] var function color(){

            begin set local var
              begin function
                begin locals, total 2
                  0 _E
                  1 _G
                end locals

[92] return [math.random(0.2 0.95) math.random(0.2 0.95) math.random(0.2 0.95) 1]

                begin return
                  begin array 4
                    begin set auto index
                      begin call method
                        get env var math
                        begin params 3
                          push const string "random"
                          ,
                          push const number 0.2
                          ,
                          push const number 0.95
                        end params ret values 3
                      end call method ret values 1
                    end set auto index
                    ,
                    begin set auto index
                      begin call method
                        get env var math
                        begin params 3
                          push const string "random"
                          ,
                          push const number 0.2
                          ,
                          push const number 0.95
                        end params ret values 3
                      end call method ret values 1
                    end set auto index
                    ,
                    begin set auto index
                      begin call method
                        get env var math
                        begin params 3
                          push const string "random"
                          ,
                          push const number 0.2
                          ,
                          push const number 0.95
                        end params ret values 3
                      end call method ret values 1
                    end set auto index
                    ,
                    begin set auto index
                      push const number 1
                    end set auto index
                  end array
                end return values 1
              end function
            end set local var color (2 0)


[95] var message = Text("Awesome text with shadow")

            begin set local var
              begin call method
                get local var _E (0 0)
                begin params 2
                  push const string "Text"
                  ,
                  push const string "Awesome text with shadow"
                end params ret values 2
              end call method ret values 1
            end set local var message (3 0)


[96] message.x = this.width * 0.5

            begin set property
              begin operator *
                begin get property
                  push this
                  push const string "width"
                end get property ret values 1
                push const number 0.5
              end operator *
              get local var auto create message (3 0)
              push const string "x"
            end set property ret values 0


[97] message.y = this.height * 0.5

            begin set property
              begin operator *
                begin get property
                  push this
                  push const string "height"
                end get property ret values 1
                push const number 0.5
              end operator *
              get local var auto create message (3 0)
              push const string "y"
            end set property ret values 0


[98] message.color = [1 0 0 1]

            begin set property
              begin array 4
                begin set auto index
                  push const number 1
                end set auto index
                ,
                begin set auto index
                  push const number 0
                end set auto index
                ,
                begin set auto index
                  push const number 0
                end set auto index
                ,
                begin set auto index
                  push const number 1
                end set auto index
              end array
              get local var auto create message (3 0)
              push const string "color"
            end set property ret values 0


[99] message.shadow = true

            begin set property
              const true
              get local var auto create message (3 0)
              push const string "shadow"
            end set property ret values 0


[100] this.insert(message)

            begin call method
              push this
              begin params 2
                push const string "insert"
                ,
                get local var message (3 0)
              end params ret values 2
            end call method ret values 0


[102] var font = "arial-en-ru-16.fnt"

            begin set local var
              push const string "arial-en-ru-16.fnt"
            end set local var font (4 0)


[103] var fps = Text("fps", font)

            begin set local var
              begin call method
                get local var _E (0 0)
                begin params 3
                  push const string "Text"
                  ,
                  push const string "fps"
                  ,
                  get local var font (4 0)
                end params ret values 3
              end call method ret values 1
            end set local var fps (5 0)


[104] fps.anchor = {x=1.05 y=1.05}

            begin set property
              begin object 2
                begin set by name
                  push const number 1.05
                end set by name: [x]
                ,
                begin set by name
                  push const number 1.05
                end set by name: [y]
              end object
              get local var auto create fps (5 0)
              push const string "anchor"
            end set property ret values 0


[105] fps.x = this.width

            begin set property
              begin get property
                push this
                push const string "width"
              end get property ret values 1
              get local var auto create fps (5 0)
              push const string "x"
            end set property ret values 0


[106] fps.y = this.height

            begin set property
              begin get property
                push this
                push const string "height"
              end get property ret values 1
              get local var auto create fps (5 0)
              push const string "y"
            end set property ret values 0


[107] fps.color = [0.9, 0.9, 0.0, 1]

            begin set property
              begin array 4
                begin set auto index
                  push const number 0.9
                end set auto index
                ,
                begin set auto index
                  push const number 0.9
                end set auto index
                ,
                begin set auto index
                  push const number 0.0
                end set auto index
                ,
                begin set auto index
                  push const number 1
                end set auto index
              end array
              get local var auto create fps (5 0)
              push const string "color"
            end set property ret values 0


[109] this.insert(fps)

            begin call method
              push this
              begin params 2
                push const string "insert"
                ,
                get local var fps (5 0)
              end params ret values 2
            end call method ret values 0


[111] var gcAllocatedBytes = Text("Kb", font)

            begin set local var
              begin call method
                get local var _E (0 0)
                begin params 3
                  push const string "Text"
                  ,
                  push const string "Kb"
                  ,
                  get local var font (4 0)
                end params ret values 3
              end call method ret values 1
            end set local var gcAllocatedBytes (6 0)


[112] gcAllocatedBytes.anchor = {x=1.05 y=1.05}

            begin set property
              begin object 2
                begin set by name
                  push const number 1.05
                end set by name: [x]
                ,
                begin set by name
                  push const number 1.05
                end set by name: [y]
              end object
              get local var auto create gcAllocatedBytes (6 0)
              push const string "anchor"
            end set property ret values 0


[113] gcAllocatedBytes.x = fps.x

            begin set property
              begin get property
                get local var fps (5 0)
                push const string "x"
              end get property ret values 1
              get local var auto create gcAllocatedBytes (6 0)
              push const string "x"
            end set property ret values 0


[114] gcAllocatedBytes.y = fps.y - fps.fontHeight*1.05*1

            begin set property
              begin operator -
                begin get property
                  get local var fps (5 0)
                  push const string "y"
                end get property ret values 1
                begin operator *
                  begin operator *
                    begin get property
                      get local var fps (5 0)
                      push const string "fontHeight"
                    end get property ret values 1
                    push const number 1.05
                  end operator *
                  push const number 1
                end operator *
              end operator -
              get local var auto create gcAllocatedBytes (6 0)
              push const string "y"
            end set property ret values 0


[115] gcAllocatedBytes.color = [0.9, 0.9, 0.0, 1]

            begin set property
              begin array 4
                begin set auto index
                  push const number 0.9
                end set auto index
                ,
                begin set auto index
                  push const number 0.9
                end set auto index
                ,
                begin set auto index
                  push const number 0.0
                end set auto index
                ,
                begin set auto index
                  push const number 1
                end set auto index
              end array
              get local var auto create gcAllocatedBytes (6 0)
              push const string "color"
            end set property ret values 0


[117] this.insert(gcAllocatedBytes)

            begin call method
              push this
              begin params 2
                push const string "insert"
                ,
                get local var gcAllocatedBytes (6 0)
              end params ret values 2
            end call method ret values 0


[119] var gcUsedBytes = Text("Kb", font)

            begin set local var
              begin call method
                get local var _E (0 0)
                begin params 3
                  push const string "Text"
                  ,
                  push const string "Kb"
                  ,
                  get local var font (4 0)
                end params ret values 3
              end call method ret values 1
            end set local var gcUsedBytes (7 0)


[120] gcUsedBytes.anchor = {x=1.05 y=1.05}

            begin set property
              begin object 2
                begin set by name
                  push const number 1.05
                end set by name: [x]
                ,
                begin set by name
                  push const number 1.05
                end set by name: [y]
              end object
              get local var auto create gcUsedBytes (7 0)
              push const string "anchor"
            end set property ret values 0


[121] gcUsedBytes.x = fps.x

            begin set property
              begin get property
                get local var fps (5 0)
                push const string "x"
              end get property ret values 1
              get local var auto create gcUsedBytes (7 0)
              push const string "x"
            end set property ret values 0


[122] gcUsedBytes.y = fps.y - fps.fontHeight*1.05*3

            begin set property
              begin operator -
                begin get property
                  get local var fps (5 0)
                  push const string "y"
                end get property ret values 1
                begin operator *
                  begin operator *
                    begin get property
                      get local var fps (5 0)
                      push const string "fontHeight"
                    end get property ret values 1
                    push const number 1.05
                  end operator *
                  push const number 3
                end operator *
              end operator -
              get local var auto create gcUsedBytes (7 0)
              push const string "y"
            end set property ret values 0


[123] gcUsedBytes.color = [0.9, 0.9, 0.0, 1]

            begin set property
              begin array 4
                begin set auto index
                  push const number 0.9
                end set auto index
                ,
                begin set auto index
                  push const number 0.9
                end set auto index
                ,
                begin set auto index
                  push const number 0.0
                end set auto index
                ,
                begin set auto index
                  push const number 1
                end set auto index
              end array
              get local var auto create gcUsedBytes (7 0)
              push const string "color"
            end set property ret values 0


[125] this.insert(gcUsedBytes)

            begin call method
              push this
              begin params 2
                push const string "insert"
                ,
                get local var gcUsedBytes (7 0)
              end params ret values 2
            end call method ret values 0


[127] var gcCachedBytes = Text("Kb", font)

            begin set local var
              begin call method
                get local var _E (0 0)
                begin params 3
                  push const string "Text"
                  ,
                  push const string "Kb"
                  ,
                  get local var font (4 0)
                end params ret values 3
              end call method ret values 1
            end set local var gcCachedBytes (8 0)


[128] gcCachedBytes.anchor = {x=1.05 y=1.05}

            begin set property
              begin object 2
                begin set by name
                  push const number 1.05
                end set by name: [x]
                ,
                begin set by name
                  push const number 1.05
                end set by name: [y]
              end object
              get local var auto create gcCachedBytes (8 0)
              push const string "anchor"
            end set property ret values 0


[129] gcCachedBytes.x = fps.x

            begin set property
              begin get property
                get local var fps (5 0)
                push const string "x"
              end get property ret values 1
              get local var auto create gcCachedBytes (8 0)
              push const string "x"
            end set property ret values 0


[130] gcCachedBytes.y = fps.y - fps.fontHeight*1.05*2

            begin set property
              begin operator -
                begin get property
                  get local var fps (5 0)
                  push const string "y"
                end get property ret values 1
                begin operator *
                  begin operator *
                    begin get property
                      get local var fps (5 0)
                      push const string "fontHeight"
                    end get property ret values 1
                    push const number 1.05
                  end operator *
                  push const number 2
                end operator *
              end operator -
              get local var auto create gcCachedBytes (8 0)
              push const string "y"
            end set property ret values 0


[131] gcCachedBytes.color = [0.9, 0.9, 0.0, 1]

            begin set property
              begin array 4
                begin set auto index
                  push const number 0.9
                end set auto index
                ,
                begin set auto index
                  push const number 0.9
                end set auto index
                ,
                begin set auto index
                  push const number 0.0
                end set auto index
                ,
                begin set auto index
                  push const number 1
                end set auto index
              end array
              get local var auto create gcCachedBytes (8 0)
              push const string "color"
            end set property ret values 0


[133] this.insert(gcCachedBytes)

            begin call method
              push this
              begin params 2
                push const string "insert"
                ,
                get local var gcCachedBytes (8 0)
              end params ret values 2
            end call method ret values 0


[135] var gcNumObjects = Text("0", font)

            begin set local var
              begin call method
                get local var _E (0 0)
                begin params 3
                  push const string "Text"
                  ,
                  push const string "0"
                  ,
                  get local var font (4 0)
                end params ret values 3
              end call method ret values 1
            end set local var gcNumObjects (9 0)


[136] gcNumObjects.anchor = {x=1.05 y=1.05}

            begin set property
              begin object 2
                begin set by name
                  push const number 1.05
                end set by name: [x]
                ,
                begin set by name
                  push const number 1.05
                end set by name: [y]
              end object
              get local var auto create gcNumObjects (9 0)
              push const string "anchor"
            end set property ret values 0


[137] gcNumObjects.x = fps.x

            begin set property
              begin get property
                get local var fps (5 0)
                push const string "x"
              end get property ret values 1
              get local var auto create gcNumObjects (9 0)
              push const string "x"
            end set property ret values 0


[138] gcNumObjects.y = fps.y - fps.fontHeight*1.05*4

            begin set property
              begin operator -
                begin get property
                  get local var fps (5 0)
                  push const string "y"
                end get property ret values 1
                begin operator *
                  begin operator *
                    begin get property
                      get local var fps (5 0)
                      push const string "fontHeight"
                    end get property ret values 1
                    push const number 1.05
                  end operator *
                  push const number 4
                end operator *
              end operator -
              get local var auto create gcNumObjects (9 0)
              push const string "y"
            end set property ret values 0


[139] gcNumObjects.color = [0.9, 0.9, 0.0, 1]

            begin set property
              begin array 4
                begin set auto index
                  push const number 0.9
                end set auto index
                ,
                begin set auto index
                  push const number 0.9
                end set auto index
                ,
                begin set auto index
                  push const number 0.0
                end set auto index
                ,
                begin set auto index
                  push const number 1
                end set auto index
              end array
              get local var auto create gcNumObjects (9 0)
              push const string "color"
            end set property ret values 0


[141] this.insert(gcNumObjects)

            begin call method
              push this
              begin params 2
                push const string "insert"
                ,
                get local var gcNumObjects (9 0)
              end params ret values 2
            end call method ret values 0


[143] this.setTimeout(function(){

            begin call method
              push this
              begin params 4
                push const string "setTimeout"
                ,
                begin function
                  begin locals, total 2
                    0 _E
                    1 _G
                  end locals

[144] fps.string = math.round(1 / director.deltaTime, 1).." fps"

                  begin set property
                    begin operator ..
                      begin call method
                        get env var math
                        begin params 3
                          push const string "round"
                          ,
                          begin operator /
                            push const number 1
                            begin get property
                              get local var director (7 2)
                              push const string "deltaTime"
                            end get property ret values 1
                          end operator /
                          ,
                          push const number 1
                        end params ret values 3
                      end call method ret values 1
                      push const string " fps"
                    end operator ..
                    get local var auto create fps (5 1)
                    push const string "string"
                  end set property ret values 0


[145] gcAllocatedBytes.string = math.round(GC.allocatedBytes / 1024).." Kb allocated"

                  begin set property
                    begin operator ..
                      begin call method
                        get env var math
                        begin params 2
                          push const string "round"
                          ,
                          begin operator /
                            begin get property
                              get env var GC
                              push const string "allocatedBytes"
                            end get property ret values 1
                            push const number 1024
                          end operator /
                        end params ret values 2
                      end call method ret values 1
                      push const string " Kb allocated"
                    end operator ..
                    get local var auto create gcAllocatedBytes (6 1)
                    push const string "string"
                  end set property ret values 0


[146] gcUsedBytes.string = math.round((GC.allocatedBytes - GC.cachedBytes) / 1024).." Kb used"

                  begin set property
                    begin operator ..
                      begin call method
                        get env var math
                        begin params 2
                          push const string "round"
                          ,
                          begin operator /
                            begin operator -
                              begin get property
                                get env var GC
                                push const string "allocatedBytes"
                              end get property ret values 1
                              begin get property
                                get env var GC
                                push const string "cachedBytes"
                              end get property ret values 1
                            end operator -
                            push const number 1024
                          end operator /
                        end params ret values 2
                      end call method ret values 1
                      push const string " Kb used"
                    end operator ..
                    get local var auto create gcUsedBytes (7 1)
                    push const string "string"
                  end set property ret values 0


[147] gcCachedBytes.string = math.round(GC.cachedBytes / 1024).." Kb cached"

                  begin set property
                    begin operator ..
                      begin call method
                        get env var math
                        begin params 2
                          push const string "round"
                          ,
                          begin operator /
                            begin get property
                              get env var GC
                              push const string "cachedBytes"
                            end get property ret values 1
                            push const number 1024
                          end operator /
                        end params ret values 2
                      end call method ret values 1
                      push const string " Kb cached"
                    end operator ..
                    get local var auto create gcCachedBytes (8 1)
                    push const string "string"
                  end set property ret values 0


[148] gcNumObjects.string = GC.numObjects.." gc objects"

                  begin set property
                    begin operator ..
                      begin get property
                        get env var GC
                        push const string "numObjects"
                      end get property ret values 1
                      push const string " gc objects"
                    end operator ..
                    get local var auto create gcNumObjects (9 1)
                    push const string "string"
                  end set property ret values 0
                end function
                ,

[149] }, 0.3, true)

                push const number 0.3
                ,
                const true
              end params ret values 4
            end call method ret values 0


[151] for(var i = 0; i < 10; i++){

            begin scope
              begin locals 1
                10 i
              end locals
              begin set local var
                push const number 0
              end set local var i (10 0)

              begin loop
                begin if
                  begin bool exp
                    begin logic not
                      begin logic <
                        get local var i (10 0)
                        push const number 10
                      end logic <
                    end logic not
                  end bool exp
                  begin then
                    break
                  end then
                end if ret values 0


[152] var monster = ((i % 2) == 0 ? Sprite : Image)("monster-01.png")

                begin scope
                  begin locals 2
                    11 monster
                    12 anim
                  end locals
                  begin set local var
                    begin call
                      begin question
                        begin bool exp
                          begin logic ==
                            begin operator %
                              get local var i (10 0)
                              push const number 2
                            end operator %
                            push const number 0
                          end logic ==
                        end bool exp
                        begin then value
                          get env var Sprite
                        end then value
                        begin else value
                          get env var Image
                        end else value
                      end question ret values 1
                      begin params 1
                        push const string "monster-01.png"
                      end params ret values 1
                    end call ret values 1
                  end set local var monster (11 0)


[154] var anim = monster.animation {

                  begin set local var
                    begin call method
                      get local var monster (11 0)
                      begin params 2
                        push const string "animation"
                        ,
                        begin object 6

[155] cols = 9

                          begin set by name
                            push const number 9
                          end set by name: [cols]
                          ,

[156] rows = 10

                          begin set by name
                            push const number 10
                          end set by name: [rows]
                          ,

[157] delay = 0.08 // math.random(0.05, 0.1)

                          begin set by name
                            push const number 0.08
                          end set by name: [delay]
                          ,

[158] start = 0

                          begin set by name
                            push const number 0
                          end set by name: [start]
                          ,

[159] frames = 17

                          begin set by name
                            push const number 17
                          end set by name: [frames]
                          ,

[160] rect = {

                          begin set by name
                            begin object 3

[161] center = {x=0.48, y:0.45}

                              begin set by name
                                begin object 2
                                  begin set by name
                                    push const number 0.48
                                  end set by name: [x]
                                  ,
                                  begin set by name
                                    push const number 0.45
                                  end set by name: [y]
                                end object
                              end set by name: [center]
                              ,

[162] width = 0.5 * 1.2

                              begin set by name
                                push const number 0.6
                              end set by name: [width]
                              ,

[163] height = 0.74 * 1.2

                              begin set by name
                                push const number 0.888
                              end set by name: [height]
                            end object
                          end set by name: [rect]
                        end object
                      end params ret values 2
                    end call method ret values 1
                  end set local var anim (12 0)


[166] anim.index = math.random(#anim.frames)

                  begin set property
                    begin call method
                      get env var math
                      begin params 2
                        push const string "random"
                        ,
                        begin length
                          begin get property
                            get local var anim (12 0)
                            push const string "frames"
                          end get property ret values 1
                        end length
                      end params ret values 2
                    end call method ret values 1
                    get local var auto create anim (12 0)
                    push const string "index"
                  end set property ret values 0


[167] monster.x = this.width * math.random(0.2, 0.8)

                  begin set property
                    begin operator *
                      begin get property
                        push this
                        push const string "width"
                      end get property ret values 1
                      begin call method
                        get env var math
                        begin params 3
                          push const string "random"
                          ,
                          push const number 0.2
                          ,
                          push const number 0.8
                        end params ret values 3
                      end call method ret values 1
                    end operator *
                    get local var auto create monster (11 0)
                    push const string "x"
                  end set property ret values 0


[168] monster.y = this.height * math.random(0.2, 0.8)

                  begin set property
                    begin operator *
                      begin get property
                        push this
                        push const string "height"
                      end get property ret values 1
                      begin call method
                        get env var math
                        begin params 3
                          push const string "random"
                          ,
                          push const number 0.2
                          ,
                          push const number 0.8
                        end params ret values 3
                      end call method ret values 1
                    end operator *
                    get local var auto create monster (11 0)
                    push const string "y"
                  end set property ret values 0


[169] monster.zOrder = monster.y

                  begin set property
                    begin get property
                      get local var monster (11 0)
                      push const string "y"
                    end get property ret values 1
                    get local var auto create monster (11 0)
                    push const string "zOrder"
                  end set property ret values 0


[170] monster.color = color()

                  begin set property
                    begin call
                      get local var color (2 0)
                      begin params 0
                      end params ret values 0
                    end call ret values 1
                    get local var auto create monster (11 0)
                    push const string "color"
                  end set property ret values 0


[171] monster.timeSpeed = math.random(0.5, 5.0)

                  begin set property
                    begin call method
                      get env var math
                      begin params 3
                        push const string "random"
                        ,
                        push const number 0.5
                        ,
                        push const number 5.0
                      end params ret values 3
                    end call method ret values 1
                    get local var auto create monster (11 0)
                    push const string "timeSpeed"
                  end set property ret values 0


[173] this.insert(monster)

                  begin call method
                    push this
                    begin params 2
                      push const string "insert"
                      ,
                      get local var monster (11 0)
                    end params ret values 2
                  end call method ret values 0


[192] }.call(monster)

                  begin call method

[175] function(){

                    begin function
                      begin locals, total 6
                        0 _E
                        1 _G
                        2 tx
                        3 ty
                        4 sx
                        5 sy
                      end locals

[176] var tx, ty, sx, sy

                      begin params 4
                        new local var tx (2 0)
                        ,
                        new local var ty (3 0)
                        ,
                        new local var sx (4 0)
                        ,
                        new local var sy (5 0)
                      end params ret values 0


[177] this.addEventListener("touch", function(touch){

                      begin call method
                        push this
                        begin params 3
                          push const string "addEventListener"
                          ,
                          push const string "touch"
                          ,
                          begin function
                            begin locals, total 3
                              0 touch (param)
                              1 _E
                              2 _G
                            end locals

[178] if(touch.phase == "start"){

                            begin if
                              begin bool exp
                                begin logic ==
                                  begin get property
                                    get local var touch (0 0 param)
                                    push const string "phase"
                                  end get property ret values 1
                                  push const string "start"
                                end logic ==
                              end bool exp
                              begin then

[179] tx, ty, sx, sy = touch.x, touch.y, this.x, this.y

                                begin scope
                                  begin set local var
                                    begin set local var
                                      begin set local var
                                        begin set local var
                                          begin params 4
                                            begin get property
                                              get local var touch (0 0 param)
                                              push const string "x"
                                            end get property ret values 1
                                            ,
                                            begin get property
                                              get local var touch (0 0 param)
                                              push const string "y"
                                            end get property ret values 1
                                            ,
                                            begin get property
                                              push this
                                              push const string "x"
                                            end get property ret values 1
                                            ,
                                            begin get property
                                              push this
                                              push const string "y"
                                            end get property ret values 1
                                          end params ret values 4
                                        end set local var sy (5 1)
                                      end set local var sx (4 1)
                                    end set local var ty (3 1)
                                  end set local var tx (2 1)


[180] this.zOrder = this.y

                                  begin set property
                                    begin get property
                                      push this
                                      push const string "y"
                                    end get property ret values 1
                                    push this
                                    push const string "zOrder"
                                  end set property ret values 0
                                end scope ret values 0
                              end then
                              begin else

[183] }else if(touch.phase == "move"){

                                begin if
                                  begin bool exp
                                    begin logic ==
                                      begin get property
                                        get local var touch (0 0 param)
                                        push const string "phase"
                                      end get property ret values 1
                                      push const string "move"
                                    end logic ==
                                  end bool exp
                                  begin then

[184] this.x, this.y = sx + touch.x - tx, sy + touch.y - ty

                                    begin scope
                                      begin set property
                                        begin set property
                                          begin params 2
                                            begin operator -
                                              begin operator +
                                                get local var sx (4 1)
                                                begin get property
                                                  get local var touch (0 0 param)
                                                  push const string "x"
                                                end get property ret values 1
                                              end operator +
                                              get local var tx (2 1)
                                            end operator -
                                            ,
                                            begin operator -
                                              begin operator +
                                                get local var sy (5 1)
                                                begin get property
                                                  get local var touch (0 0 param)
                                                  push const string "y"
                                                end get property ret values 1
                                              end operator +
                                              get local var ty (3 1)
                                            end operator -
                                          end params ret values 2
                                          push this
                                          push const string "y"
                                        end set property ret values 1
                                        push this
                                        push const string "x"
                                      end set property ret values 0


[185] this.zOrder = this.y

                                      begin set property
                                        begin get property
                                          push this
                                          push const string "y"
                                        end get property ret values 1
                                        push this
                                        push const string "zOrder"
                                      end set property ret values 0
                                    end scope ret values 0
                                  end then
                                  begin else

[187] }else if(touch.phase == "end"){

                                    begin if
                                      begin bool exp
                                        begin logic ==
                                          begin get property
                                            get local var touch (0 0 param)
                                            push const string "phase"
                                          end get property ret values 1
                                          push const string "end"
                                        end logic ==
                                      end bool exp
                                      begin then

[190] }

                                        begin scope
                                        end scope ret values 0
                                      end then
                                    end if ret values 0
                                  end else
                                end if ret values 0
                              end else
                            end if ret values 0
                          end function
                        end params ret values 3
                      end call method ret values 0
                    end function

[192] }.call(monster)

                    begin params 2
                      push const string "call"
                      ,
                      get local var monster (11 0)
                    end params ret values 2
                  end call method ret values 0
                end scope ret values 0


[151] for(var i = 0; i < 10; i++){

                begin code list
                  begin set local var
                    begin operator +
                      get local var i (10 0)
                      push const number 1
                    end operator +
                  end set local var i (10 0)
                end code list ret values 0
              end loop ret values 0
            end scope ret values 0


[198] var rect = Image("award-first.png")

            begin scope
              begin locals 1
                13 rect
              end locals
              begin set local var
                begin call method
                  get local var _E (0 0)
                  begin params 2
                    push const string "Image"
                    ,
                    push const string "award-first.png"
                  end params ret values 2
                end call method ret values 1
              end set local var rect (13 0)


[199] rect.speed = math.random(0.2 0.5)

              begin set property
                begin call method
                  get env var math
                  begin params 3
                    push const string "random"
                    ,
                    push const number 0.2
                    ,
                    push const number 0.5
                  end params ret values 3
                end call method ret values 1
                get local var auto create rect (13 0)
                push const string "speed"
              end set property ret values 0


[200] rect.anchor = {x = 0 y = 1}

              begin set property
                begin object 2
                  begin set by name
                    push const number 0
                  end set by name: [x]
                  ,
                  begin set by name
                    push const number 1
                  end set by name: [y]
                end object
                get local var auto create rect (13 0)
                push const string "anchor"
              end set property ret values 0


[201] rect.setRect(

              begin call method
                get local var rect (13 0)
                begin params 5
                  push const string "setRect"
                  ,

[202] this.width * 0.0

                  begin operator *
                    begin get property
                      push this
                      push const string "width"
                    end get property ret values 1
                    push const number 0.0
                  end operator *
                  ,

[203] this.height * 1.0

                  begin operator *
                    begin get property
                      push this
                      push const string "height"
                    end get property ret values 1
                    push const number 1.0
                  end operator *
                  ,

[204] 100

                  push const number 100
                  ,

[205] 200

                  push const number 200
                end params ret values 5
              end call method ret values 0


[207] rect.color = color()

              begin set property
                begin call
                  get local var color (2 0)
                  begin params 0
                  end params ret values 0
                end call ret values 1
                get local var auto create rect (13 0)
                push const string "color"
              end set property ret values 0


[210] rect.transition {

              begin call method
                get local var rect (13 0)
                begin params 2
                  push const string "transition"
                  ,
                  begin object 4

[211] delay = 2

                    begin set by name
                      push const number 2
                    end set by name: [delay]
                    ,

[212] easy = Easy.inOutBounce

                    begin set by name
                      begin get property
                        get env var Easy
                        push const string "inOutBounce"
                      end get property ret values 1
                    end set by name: [easy]
                    ,

[214] repeat = true

                    begin set by name
                      const true
                    end set by name: [repeat]
                    ,

[226] sequence = [{

                    begin set by name
                      begin array 5
                        begin set auto index
                          begin object 8

[227] duration = 3

                            begin set by name
                              push const number 3
                            end set by name: [duration]
                            ,

[228] x = this.width * 0.4

                            begin set by name
                              begin operator *
                                begin get property
                                  push this
                                  push const string "width"
                                end get property ret values 1
                                push const number 0.4
                              end operator *
                            end set by name: [x]
                            ,

[229] y = this.height * 0.7

                            begin set by name
                              begin operator *
                                begin get property
                                  push this
                                  push const string "height"
                                end get property ret values 1
                                push const number 0.7
                              end operator *
                            end set by name: [y]
                            ,

[230] anchorX = 0.5

                            begin set by name
                              push const number 0.5
                            end set by name: [anchorX]
                            ,

[231] anchorY = 0.5

                            begin set by name
                              push const number 0.5
                            end set by name: [anchorY]
                            ,

[232] rotation = 45

                            begin set by name
                              push const number 45
                            end set by name: [rotation]
                            ,

[233] zOrder = 1

                            begin set by name
                              push const number 1
                            end set by name: [zOrder]
                            ,

[234] opacity = 0.7

                            begin set by name
                              push const number 0.7
                            end set by name: [opacity]
                          end object
                        end set auto index
                        ,

[235] }, {

                        begin set auto index
                          begin object 8

[236] duration = 1

                            begin set by name
                              push const number 1
                            end set by name: [duration]
                            ,

[237] x = this.width * 0.7

                            begin set by name
                              begin operator *
                                begin get property
                                  push this
                                  push const string "width"
                                end get property ret values 1
                                push const number 0.7
                              end operator *
                            end set by name: [x]
                            ,

[238] y = this.height * 0.3

                            begin set by name
                              begin operator *
                                begin get property
                                  push this
                                  push const string "height"
                                end get property ret values 1
                                push const number 0.3
                              end operator *
                            end set by name: [y]
                            ,

[239] anchorX = 0.5

                            begin set by name
                              push const number 0.5
                            end set by name: [anchorX]
                            ,

[240] anchorY = 0.5

                            begin set by name
                              push const number 0.5
                            end set by name: [anchorY]
                            ,

[241] rotation = 45

                            begin set by name
                              push const number 45
                            end set by name: [rotation]
                            ,

[242] zOrder = 1

                            begin set by name
                              push const number 1
                            end set by name: [zOrder]
                            ,

[243] opacity = 0.7

                            begin set by name
                              push const number 0.7
                            end set by name: [opacity]
                          end object
                        end set auto index
                        ,

[244] }, {

                        begin set auto index
                          begin object 5

[245] duration = 1

                            begin set by name
                              push const number 1
                            end set by name: [duration]
                            ,

[246] x = this.width * 0.3

                            begin set by name
                              begin operator *
                                begin get property
                                  push this
                                  push const string "width"
                                end get property ret values 1
                                push const number 0.3
                              end operator *
                            end set by name: [x]
                            ,

[247] y = this.height * 0.7

                            begin set by name
                              begin operator *
                                begin get property
                                  push this
                                  push const string "height"
                                end get property ret values 1
                                push const number 0.7
                              end operator *
                            end set by name: [y]
                            ,

[248] rotation = -45

                            begin set by name
                              begin neg
                                push const number 45
                              end neg
                            end set by name: [rotation]
                            ,

[249] opacity = 1.0

                            begin set by name
                              push const number 1.0
                            end set by name: [opacity]
                          end object
                        end set auto index
                        ,

[250] }, {

                        begin set auto index
                          begin object 4

[251] duration = 1

                            begin set by name
                              push const number 1
                            end set by name: [duration]
                            ,

[252] x = this.width * 0.1

                            begin set by name
                              begin operator *
                                begin get property
                                  push this
                                  push const string "width"
                                end get property ret values 1
                                push const number 0.1
                              end operator *
                            end set by name: [x]
                            ,

[253] y = this.height * 0.1

                            begin set by name
                              begin operator *
                                begin get property
                                  push this
                                  push const string "height"
                                end get property ret values 1
                                push const number 0.1
                              end operator *
                            end set by name: [y]
                            ,

[254] rotation = 270

                            begin set by name
                              push const number 270
                            end set by name: [rotation]
                          end object
                        end set auto index
                        ,

[255] }, {

                        begin set auto index
                          begin object 6

[256] duration = 1

                            begin set by name
                              push const number 1
                            end set by name: [duration]
                            ,

[257] x = this.width * 0.0

                            begin set by name
                              begin operator *
                                begin get property
                                  push this
                                  push const string "width"
                                end get property ret values 1
                                push const number 0.0
                              end operator *
                            end set by name: [x]
                            ,

[258] y = this.height * 1.0

                            begin set by name
                              begin operator *
                                begin get property
                                  push this
                                  push const string "height"
                                end get property ret values 1
                                push const number 1.0
                              end operator *
                            end set by name: [y]
                            ,

[259] anchorX = 0

                            begin set by name
                              push const number 0
                            end set by name: [anchorX]
                            ,

[260] anchorY = 1

                            begin set by name
                              push const number 1
                            end set by name: [anchorY]
                            ,

[261] rotation = 0

                            begin set by name
                              push const number 0
                            end set by name: [rotation]
                          end object
                        end set auto index
                      end array
                    end set by name: [sequence]
                  end object
                end params ret values 2
              end call method ret values 0


[267] this.insert(rect)

              begin call method
                push this
                begin params 2
                  push const string "insert"
                  ,
                  get local var rect (13 0)
                end params ret values 2
              end call method ret values 0
            end scope ret values 0


[271] for(var i = 0; i < 0; i++){

            begin scope
              begin locals 1
                14 i
              end locals
              begin set local var
                push const number 0
              end set local var i (14 0)

              begin loop
                begin if
                  begin bool exp
                    begin logic not
                      begin logic <
                        get local var i (14 0)
                        push const number 0
                      end logic <
                    end logic not
                  end bool exp
                  begin then
                    break
                  end then
                end if ret values 0


[272] var rect = MyColorNode()

                begin scope
                  begin locals 1
                    15 rect
                  end locals
                  begin set local var
                    begin call method
                      get local var _E (0 0)
                      begin params 1
                        push const string "MyColorNode"
                      end params ret values 1
                    end call method ret values 1
                  end set local var rect (15 0)


[273] rect.speed = math.random(0.2 0.5)

                  begin set property
                    begin call method
                      get env var math
                      begin params 3
                        push const string "random"
                        ,
                        push const number 0.2
                        ,
                        push const number 0.5
                      end params ret values 3
                    end call method ret values 1
                    get local var auto create rect (15 0)
                    push const string "speed"
                  end set property ret values 0


[274] rect.setRect(

                  begin call method
                    get local var rect (15 0)
                    begin params 5
                      push const string "setRect"
                      ,

[275] this.width * math.random(0.1 0.7)

                      begin operator *
                        begin get property
                          push this
                          push const string "width"
                        end get property ret values 1
                        begin call method
                          get env var math
                          begin params 3
                            push const string "random"
                            ,
                            push const number 0.1
                            ,
                            push const number 0.7
                          end params ret values 3
                        end call method ret values 1
                      end operator *
                      ,

[276] this.height * math.random(0.1 0.7)

                      begin operator *
                        begin get property
                          push this
                          push const string "height"
                        end get property ret values 1
                        begin call method
                          get env var math
                          begin params 3
                            push const string "random"
                            ,
                            push const number 0.1
                            ,
                            push const number 0.7
                          end params ret values 3
                        end call method ret values 1
                      end operator *
                      ,

[277] this.width * math.random(0.1 0.2)

                      begin operator *
                        begin get property
                          push this
                          push const string "width"
                        end get property ret values 1
                        begin call method
                          get env var math
                          begin params 3
                            push const string "random"
                            ,
                            push const number 0.1
                            ,
                            push const number 0.2
                          end params ret values 3
                        end call method ret values 1
                      end operator *
                      ,

[278] this.width * math.random(0.1 0.2)

                      begin operator *
                        begin get property
                          push this
                          push const string "width"
                        end get property ret values 1
                        begin call method
                          get env var math
                          begin params 3
                            push const string "random"
                            ,
                            push const number 0.1
                            ,
                            push const number 0.2
                          end params ret values 3
                        end call method ret values 1
                      end operator *
                    end params ret values 5
                  end call method ret values 0


[280] rect.color = color()

                  begin set property
                    begin call
                      get local var color (2 0)
                      begin params 0
                      end params ret values 0
                    end call ret values 1
                    get local var auto create rect (15 0)
                    push const string "color"
                  end set property ret values 0


[281] this.insert(rect)

                  begin call method
                    push this
                    begin params 2
                      push const string "insert"
                      ,
                      get local var rect (15 0)
                    end params ret values 2
                  end call method ret values 0
                end scope ret values 0


[271] for(var i = 0; i < 0; i++){

                begin code list
                  begin set local var
                    begin operator +
                      get local var i (14 0)
                      push const number 1
                    end operator +
                  end set local var i (14 0)
                end code list ret values 0
              end loop ret values 0
            end scope ret values 0


[285] var scene = this

            begin set local var
              push this
            end set local var scene (16 0)


[286] for(var i = 0; i < 5; i++){

            begin scope
              begin locals 1
                17 i
              end locals
              begin set local var
                push const number 0
              end set local var i (17 0)

              begin loop
                begin if
                  begin bool exp
                    begin logic not
                      begin logic <
                        get local var i (17 0)
                        push const number 5
                      end logic <
                    end logic not
                  end bool exp
                  begin then
                    break
                  end then
                end if ret values 0


[287] function(){

                begin scope

[358] }()

                  begin call

[287] function(){

                    begin function
                      begin locals, total 16
                        0 _E
                        1 _G
                        2 self
                        3 speed
                        4 dx
                        5 dy
                        6 touched
                        7 timer
                        8 changeDir
                        9 tx
                        10 ty
                        11 sx
                        12 sy
                        13 clamp
                        14 rotSpeed
                        15 time
                      end locals

[288] var self = Image("award-first.png") // ColorNode()

                      begin set local var
                        begin call method
                          get local var _E (0 0)
                          begin params 2
                            push const string "Image"
                            ,
                            push const string "award-first.png"
                          end params ret values 2
                        end call method ret values 1
                      end set local var self (2 0)


[289] self.anchor = { x = 0.5 y = 0.38 }

                      begin set property
                        begin object 2
                          begin set by name
                            push const number 0.5
                          end set by name: [x]
                          ,
                          begin set by name
                            push const number 0.38
                          end set by name: [y]
                        end object
                        get local var auto create self (2 0)
                        push const string "anchor"
                      end set property ret values 0


[290] var speed = math.random(0.2 0.5)

                      begin set local var
                        begin call method
                          get env var math
                          begin params 3
                            push const string "random"
                            ,
                            push const number 0.2
                            ,
                            push const number 0.5
                          end params ret values 3
                        end call method ret values 1
                      end set local var speed (3 0)


[291] self.setRect(

                      begin call method
                        get local var self (2 0)
                        begin params 5
                          push const string "setRect"
                          ,

[292] scene.width * math.random(0.1 0.7)

                          begin operator *
                            begin get property
                              get local var scene (16 1)
                              push const string "width"
                            end get property ret values 1
                            begin call method
                              get env var math
                              begin params 3
                                push const string "random"
                                ,
                                push const number 0.1
                                ,
                                push const number 0.7
                              end params ret values 3
                            end call method ret values 1
                          end operator *
                          ,

[293] scene.height * math.random(0.1 0.7)

                          begin operator *
                            begin get property
                              get local var scene (16 1)
                              push const string "height"
                            end get property ret values 1
                            begin call method
                              get env var math
                              begin params 3
                                push const string "random"
                                ,
                                push const number 0.1
                                ,
                                push const number 0.7
                              end params ret values 3
                            end call method ret values 1
                          end operator *
                          ,

[294] scene.width * math.random(0.1 0.2)

                          begin operator *
                            begin get property
                              get local var scene (16 1)
                              push const string "width"
                            end get property ret values 1
                            begin call method
                              get env var math
                              begin params 3
                                push const string "random"
                                ,
                                push const number 0.1
                                ,
                                push const number 0.2
                              end params ret values 3
                            end call method ret values 1
                          end operator *
                          ,

[295] scene.width * math.random(0.1 0.2)

                          begin operator *
                            begin get property
                              get local var scene (16 1)
                              push const string "width"
                            end get property ret values 1
                            begin call method
                              get env var math
                              begin params 3
                                push const string "random"
                                ,
                                push const number 0.1
                                ,
                                push const number 0.2
                              end params ret values 3
                            end call method ret values 1
                          end operator *
                        end params ret values 5
                      end call method ret values 0


[297] self.color = color()

                      begin set property
                        begin call
                          get local var color (2 1)
                          begin params 0
                          end params ret values 0
                        end call ret values 1
                        get local var auto create self (2 0)
                        push const string "color"
                      end set property ret values 0


[298] scene.insert(self)

                      begin call method
                        get local var scene (16 1)
                        begin params 2
                          push const string "insert"
                          ,
                          get local var self (2 0)
                        end params ret values 2
                      end call method ret values 0


[300] var dx, dy, touched, timer

                      begin params 4
                        new local var dx (4 0)
                        ,
                        new local var dy (5 0)
                        ,
                        new local var touched (6 0)
                        ,
                        new local var timer (7 0)
                      end params ret values 0


[301] var function changeDir(){

                      begin set local var
                        begin function
                          begin locals, total 2
                            0 _E
                            1 _G
                          end locals

[302] dx = math.random(-1 1)

                          begin set local var
                            begin call method
                              get env var math
                              begin params 3
                                push const string "random"
                                ,
                                begin neg
                                  push const number 1
                                end neg
                                ,
                                push const number 1
                              end params ret values 3
                            end call method ret values 1
                          end set local var dx (4 1)


[303] dy = math.random(-1 1)

                          begin set local var
                            begin call method
                              get env var math
                              begin params 3
                                push const string "random"
                                ,
                                begin neg
                                  push const number 1
                                end neg
                                ,
                                push const number 1
                              end params ret values 3
                            end call method ret values 1
                          end set local var dy (5 1)


[304] timer = self.setTimeout(changeDir, math.random(3.0 5.0))

                          begin set local var
                            begin call method
                              get local var self (2 1)
                              begin params 3
                                push const string "setTimeout"
                                ,
                                get local var changeDir (8 1)
                                ,
                                begin call method
                                  get env var math
                                  begin params 3
                                    push const string "random"
                                    ,
                                    push const number 3.0
                                    ,
                                    push const number 5.0
                                  end params ret values 3
                                end call method ret values 1
                              end params ret values 3
                            end call method ret values 1
                          end set local var timer (7 1)
                        end function
                      end set local var changeDir (8 0)


[306] changeDir()

                      begin call
                        get local var changeDir (8 0)
                        begin params 0
                        end params ret values 0
                      end call ret values 0


[308] var tx, ty, sx, sy

                      begin params 4
                        new local var tx (9 0)
                        ,
                        new local var ty (10 0)
                        ,
                        new local var sx (11 0)
                        ,
                        new local var sy (12 0)
                      end params ret values 0


[309] self.addEventListener("touch", function(touch){

                      begin call method
                        get local var self (2 0)
                        begin params 3
                          push const string "addEventListener"
                          ,
                          push const string "touch"
                          ,
                          begin function
                            begin locals, total 3
                              0 touch (param)
                              1 _E
                              2 _G
                            end locals

[310] if(touch.phase == "start"){

                            begin if
                              begin bool exp
                                begin logic ==
                                  begin get property
                                    get local var touch (0 0 param)
                                    push const string "phase"
                                  end get property ret values 1
                                  push const string "start"
                                end logic ==
                              end bool exp
                              begin then

[311] tx, ty, sx, sy = touch.x, touch.y, this.x, this.y

                                begin scope
                                  begin set local var
                                    begin set local var
                                      begin set local var
                                        begin set local var
                                          begin params 4
                                            begin get property
                                              get local var touch (0 0 param)
                                              push const string "x"
                                            end get property ret values 1
                                            ,
                                            begin get property
                                              get local var touch (0 0 param)
                                              push const string "y"
                                            end get property ret values 1
                                            ,
                                            begin get property
                                              push this
                                              push const string "x"
                                            end get property ret values 1
                                            ,
                                            begin get property
                                              push this
                                              push const string "y"
                                            end get property ret values 1
                                          end params ret values 4
                                        end set local var sy (12 1)
                                      end set local var sx (11 1)
                                    end set local var ty (10 1)
                                  end set local var tx (9 1)


[312] touched = true

                                  begin set local var
                                    const true
                                  end set local var touched (6 1)


[313] this.zOrder = 1

                                  begin set property
                                    push const number 1
                                    push this
                                    push const string "zOrder"
                                  end set property ret values 0


[314] this.clearTimeout(timer)

                                  begin call method
                                    push this
                                    begin params 2
                                      push const string "clearTimeout"
                                      ,
                                      get local var timer (7 1)
                                    end params ret values 2
                                  end call method ret values 0
                                end scope ret values 0
                              end then
                              begin else

[315] }else if(touch.phase == "move"){

                                begin if
                                  begin bool exp
                                    begin logic ==
                                      begin get property
                                        get local var touch (0 0 param)
                                        push const string "phase"
                                      end get property ret values 1
                                      push const string "move"
                                    end logic ==
                                  end bool exp
                                  begin then

[316] this.x, this.y = sx + touch.x - tx, sy + touch.y - ty

                                    begin scope
                                      begin set property
                                        begin set property
                                          begin params 2
                                            begin operator -
                                              begin operator +
                                                get local var sx (11 1)
                                                begin get property
                                                  get local var touch (0 0 param)
                                                  push const string "x"
                                                end get property ret values 1
                                              end operator +
                                              get local var tx (9 1)
                                            end operator -
                                            ,
                                            begin operator -
                                              begin operator +
                                                get local var sy (12 1)
                                                begin get property
                                                  get local var touch (0 0 param)
                                                  push const string "y"
                                                end get property ret values 1
                                              end operator +
                                              get local var ty (10 1)
                                            end operator -
                                          end params ret values 2
                                          push this
                                          push const string "y"
                                        end set property ret values 1
                                        push this
                                        push const string "x"
                                      end set property ret values 0
                                    end scope ret values 0
                                  end then
                                  begin else

[317] }else if(touch.phase == "end"){

                                    begin if
                                      begin bool exp
                                        begin logic ==
                                          begin get property
                                            get local var touch (0 0 param)
                                            push const string "phase"
                                          end get property ret values 1
                                          push const string "end"
                                        end logic ==
                                      end bool exp
                                      begin then

[318] touched = false

                                        begin scope
                                          begin set local var
                                            const false
                                          end set local var touched (6 1)


[319] this.zOrder = 0

                                          begin set property
                                            push const number 0
                                            push this
                                            push const string "zOrder"
                                          end set property ret values 0


[320] this.opacity = 1

                                          begin set property
                                            push const number 1
                                            push this
                                            push const string "opacity"
                                          end set property ret values 0


[321] changeDir()

                                          begin call
                                            get local var changeDir (8 1)
                                            begin params 0
                                            end params ret values 0
                                          end call ret values 0
                                        end scope ret values 0
                                      end then
                                    end if ret values 0
                                  end else
                                end if ret values 0
                              end else
                            end if ret values 0
                          end function
                        end params ret values 3
                      end call method ret values 0


[325] var function clamp(a min max){

                      begin set local var
                        begin function
                          begin locals, total 5
                            0 a (param)
                            1 min (param)
                            2 max (param)
                            3 _E
                            4 _G
                          end locals

[326] if(a < min) return min

                          begin if
                            begin bool exp
                              begin logic <
                                get local var a (0 0 param)
                                get local var min (1 0 param)
                              end logic <
                            end bool exp
                            begin then
                              begin code list
                                begin return
                                  get local var min (1 0 param)
                                end return values 1
                              end code list ret values 0
                            end then
                          end if ret values 0


[327] if(a > max) return max

                          begin if
                            begin bool exp
                              begin logic >
                                get local var a (0 0 param)
                                get local var max (2 0 param)
                              end logic >
                            end bool exp
                            begin then
                              begin code list
                                begin return
                                  get local var max (2 0 param)
                                end return values 1
                              end code list ret values 0
                            end then
                          end if ret values 0


[328] return a

                          begin code list
                            begin return
                              get local var a (0 0 param)
                            end return values 1
                          end code list ret values 0
                        end function
                      end set local var clamp (13 0)


[331] var rotSpeed = math.random(0.8 1.5)

                      begin set local var
                        begin call method
                          get env var math
                          begin params 3
                            push const string "random"
                            ,
                            push const number 0.8
                            ,
                            push const number 1.5
                          end params ret values 3
                        end call method ret values 1
                      end set local var rotSpeed (14 0)


[332] var time = 0

                      begin set local var
                        push const number 0
                      end set local var time (15 0)


[333] self.addEventListener("enterFrame", function(params){

                      begin call method
                        get local var self (2 0)
                        begin params 3
                          push const string "addEventListener"
                          ,
                          push const string "enterFrame"
                          ,
                          begin function
                            begin locals, total 4
                              0 params (param)
                              1 _E
                              2 _G
                              3 offs
                            end locals

[334] if(touched){

                            begin if
                              begin bool exp
                                get local var touched (6 1)
                              end bool exp
                              begin then

[335] this.scaleX = 1 + (math.cos(this.time * math.PI * rotSpeed) + 1) / 2 * 0.5

                                begin scope
                                  begin set property
                                    begin operator +
                                      push const number 1
                                      begin operator *
                                        begin operator /
                                          begin operator +
                                            begin call method
                                              get env var math
                                              begin params 2
                                                push const string "cos"
                                                ,
                                                begin operator *
                                                  begin operator *
                                                    begin get property
                                                      push this
                                                      push const string "time"
                                                    end get property ret values 1
                                                    begin get property
                                                      get env var math
                                                      push const string "PI"
                                                    end get property ret values 1
                                                  end operator *
                                                  get local var rotSpeed (14 1)
                                                end operator *
                                              end params ret values 2
                                            end call method ret values 1
                                            push const number 1
                                          end operator +
                                          push const number 2
                                        end operator /
                                        push const number 0.5
                                      end operator *
                                    end operator +
                                    push this
                                    push const string "scaleX"
                                  end set property ret values 0


[336] this.scaleY = 1 + (math.sin(this.time * math.PI * rotSpeed * 3) + 1) / 2 * 0.5

                                  begin set property
                                    begin operator +
                                      push const number 1
                                      begin operator *
                                        begin operator /
                                          begin operator +
                                            begin call method
                                              get env var math
                                              begin params 2
                                                push const string "sin"
                                                ,
                                                begin operator *
                                                  begin operator *
                                                    begin operator *
                                                      begin get property
                                                        push this
                                                        push const string "time"
                                                      end get property ret values 1
                                                      begin get property
                                                        get env var math
                                                        push const string "PI"
                                                      end get property ret values 1
                                                    end operator *
                                                    get local var rotSpeed (14 1)
                                                  end operator *
                                                  push const number 3
                                                end operator *
                                              end params ret values 2
                                            end call method ret values 1
                                            push const number 1
                                          end operator +
                                          push const number 2
                                        end operator /
                                        push const number 0.5
                                      end operator *
                                    end operator +
                                    push this
                                    push const string "scaleY"
                                  end set property ret values 0


[337] this.opacity = 0.5 + (math.sin(this.time * math.PI * rotSpeed * 2) + 1) / 2 * 1.0

                                  begin set property
                                    begin operator +
                                      push const number 0.5
                                      begin operator *
                                        begin operator /
                                          begin operator +
                                            begin call method
                                              get env var math
                                              begin params 2
                                                push const string "sin"
                                                ,
                                                begin operator *
                                                  begin operator *
                                                    begin operator *
                                                      begin get property
                                                        push this
                                                        push const string "time"
                                                      end get property ret values 1
                                                      begin get property
                                                        get env var math
                                                        push const string "PI"
                                                      end get property ret values 1
                                                    end operator *
                                                    get local var rotSpeed (14 1)
                                                  end operator *
                                                  push const number 2
                                                end operator *
                                              end params ret values 2
                                            end call method ret values 1
                                            push const number 1
                                          end operator +
                                          push const number 2
                                        end operator /
                                        push const number 1.0
                                      end operator *
                                    end operator +
                                    push this
                                    push const string "opacity"
                                  end set property ret values 0


[338] return

                                  return
                                end scope ret values 0
                              end then
                            end if ret values 0


[340] time = time + params.deltaTime

                            begin set local var
                              begin operator +
                                get local var time (15 1)
                                begin get property
                                  get local var params (0 0 param)
                                  push const string "deltaTime"
                                end get property ret values 1
                              end operator +
                            end set local var time (15 1)


[341] this.rotation = math.deg(math.sin(time * math.PI * rotSpeed))

                            begin set property
                              begin call method
                                get env var math
                                begin params 2
                                  push const string "deg"
                                  ,
                                  begin call method
                                    get env var math
                                    begin params 2
                                      push const string "sin"
                                      ,
                                      begin operator *
                                        begin operator *
                                          get local var time (15 1)
                                          begin get property
                                            get env var math
                                            push const string "PI"
                                          end get property ret values 1
                                        end operator *
                                        get local var rotSpeed (14 1)
                                      end operator *
                                    end params ret values 2
                                  end call method ret values 1
                                end params ret values 2
                              end call method ret values 1
                              push this
                              push const string "rotation"
                            end set property ret values 0


[343] var offs = director.width * speed * params.deltaTime

                            begin set local var
                              begin operator *
                                begin operator *
                                  begin get property
                                    get local var director (7 3)
                                    push const string "width"
                                  end get property ret values 1
                                  get local var speed (3 1)
                                end operator *
                                begin get property
                                  get local var params (0 0 param)
                                  push const string "deltaTime"
                                end get property ret values 1
                              end operator *
                            end set local var offs (3 0)


[345] this.x = this.x + dx * offs

                            begin set property
                              begin operator +
                                begin get property
                                  push this
                                  push const string "x"
                                end get property ret values 1
                                begin operator *
                                  get local var dx (4 1)
                                  get local var offs (3 0)
                                end operator *
                              end operator +
                              push this
                              push const string "x"
                            end set property ret values 0


[346] this.y = this.y + dy * offs

                            begin set property
                              begin operator +
                                begin get property
                                  push this
                                  push const string "y"
                                end get property ret values 1
                                begin operator *
                                  get local var dy (5 1)
                                  get local var offs (3 0)
                                end operator *
                              end operator +
                              push this
                              push const string "y"
                            end set property ret values 0


[348] if(this.x < 0 || this.x > this.parent.width){

                            begin if
                              begin bool exp
                                begin logic ||
                                  begin logic <
                                    begin get property
                                      push this
                                      push const string "x"
                                    end get property ret values 1
                                    push const number 0
                                  end logic <
                                  begin logic >
                                    begin get property
                                      push this
                                      push const string "x"
                                    end get property ret values 1
                                    begin get property
                                      begin get property
                                        push this
                                        push const string "parent"
                                      end get property ret values 1
                                      push const string "width"
                                    end get property ret values 1
                                  end logic >
                                end logic ||
                              end bool exp
                              begin then

[349] dx = -dx

                                begin scope
                                  begin set local var
                                    begin neg
                                      get local var dx (4 1)
                                    end neg
                                  end set local var dx (4 1)


[350] this.x = clamp(this.x, 0, this.parent.width)

                                  begin set property
                                    begin call
                                      get local var clamp (13 1)
                                      begin params 3
                                        begin get property
                                          push this
                                          push const string "x"
                                        end get property ret values 1
                                        ,
                                        push const number 0
                                        ,
                                        begin get property
                                          begin get property
                                            push this
                                            push const string "parent"
                                          end get property ret values 1
                                          push const string "width"
                                        end get property ret values 1
                                      end params ret values 3
                                    end call ret values 1
                                    push this
                                    push const string "x"
                                  end set property ret values 0
                                end scope ret values 0
                              end then
                            end if ret values 0


[352] if(this.y < 0 || this.y > this.parent.height){

                            begin if
                              begin bool exp
                                begin logic ||
                                  begin logic <
                                    begin get property
                                      push this
                                      push const string "y"
                                    end get property ret values 1
                                    push const number 0
                                  end logic <
                                  begin logic >
                                    begin get property
                                      push this
                                      push const string "y"
                                    end get property ret values 1
                                    begin get property
                                      begin get property
                                        push this
                                        push const string "parent"
                                      end get property ret values 1
                                      push const string "height"
                                    end get property ret values 1
                                  end logic >
                                end logic ||
                              end bool exp
                              begin then

[353] dy = -dy

                                begin scope
                                  begin set local var
                                    begin neg
                                      get local var dy (5 1)
                                    end neg
                                  end set local var dy (5 1)


[354] this.y = clamp(this.y, 0, this.parent.height)

                                  begin set property
                                    begin call
                                      get local var clamp (13 1)
                                      begin params 3
                                        begin get property
                                          push this
                                          push const string "y"
                                        end get property ret values 1
                                        ,
                                        push const number 0
                                        ,
                                        begin get property
                                          begin get property
                                            push this
                                            push const string "parent"
                                          end get property ret values 1
                                          push const string "height"
                                        end get property ret values 1
                                      end params ret values 3
                                    end call ret values 1
                                    push this
                                    push const string "y"
                                  end set property ret values 0
                                end scope ret values 0
                              end then
                            end if ret values 0
                          end function
                        end params ret values 3
                      end call method ret values 0
                    end function

[358] }()

                    begin params 0
                    end params ret values 0
                  end call ret values 0
                end scope ret values 0


[286] for(var i = 0; i < 5; i++){

                begin code list
                  begin set local var
                    begin operator +
                      get local var i (17 0)
                      push const number 1
                    end operator +
                  end set local var i (17 0)
                end code list ret values 0
              end loop ret values 0
            end scope ret values 0


[362] var bg = Image("bg.jpg")

            begin scope
              begin locals 13
                18 bg
                19 ball
                20 friction
                21 gravity
                22 screenWidth
                23 screenHeight
                24 speedX
                25 speedY
                26 radius
                27 prevX
                28 prevY
                29 trackVelocity
                30 physUpdate
              end locals
              begin set local var
                begin call method
                  get local var _E (0 0)
                  begin params 2
                    push const string "Image"
                    ,
                    push const string "bg.jpg"
                  end params ret values 2
                end call method ret values 1
              end set local var bg (18 0)


[363] bg.x = this.width / 2

              begin set property
                begin operator /
                  begin get property
                    push this
                    push const string "width"
                  end get property ret values 1
                  push const number 2
                end operator /
                get local var auto create bg (18 0)
                push const string "x"
              end set property ret values 0


[364] bg.y = this.height / 2

              begin set property
                begin operator /
                  begin get property
                    push this
                    push const string "height"
                  end get property ret values 1
                  push const number 2
                end operator /
                get local var auto create bg (18 0)
                push const string "y"
              end set property ret values 0


[365] bg.scale = math.max(this.width / bg.width, this.height / bg.height)

              begin set property
                begin call method
                  get env var math
                  begin params 3
                    push const string "max"
                    ,
                    begin operator /
                      begin get property
                        push this
                        push const string "width"
                      end get property ret values 1
                      begin get property
                        get local var bg (18 0)
                        push const string "width"
                      end get property ret values 1
                    end operator /
                    ,
                    begin operator /
                      begin get property
                        push this
                        push const string "height"
                      end get property ret values 1
                      begin get property
                        get local var bg (18 0)
                        push const string "height"
                      end get property ret values 1
                    end operator /
                  end params ret values 3
                end call method ret values 1
                get local var auto create bg (18 0)
                push const string "scale"
              end set property ret values 0


[366] this.insert(bg, -10)

              begin call method
                push this
                begin params 3
                  push const string "insert"
                  ,
                  get local var bg (18 0)
                  ,
                  begin neg
                    push const number 10
                  end neg
                end params ret values 3
              end call method ret values 0


[368] var ball = Image("ball.png")

              begin set local var
                begin call method
                  get local var _E (0 0)
                  begin params 2
                    push const string "Image"
                    ,
                    push const string "ball.png"
                  end params ret values 2
                end call method ret values 1
              end set local var ball (19 0)


[369] ball.x = this.width / 2

              begin set property
                begin operator /
                  begin get property
                    push this
                    push const string "width"
                  end get property ret values 1
                  push const number 2
                end operator /
                get local var auto create ball (19 0)
                push const string "x"
              end set property ret values 0


[370] ball.y = this.height / 2

              begin set property
                begin operator /
                  begin get property
                    push this
                    push const string "height"
                  end get property ret values 1
                  push const number 2
                end operator /
                get local var auto create ball (19 0)
                push const string "y"
              end set property ret values 0


[371] ball.zOrder = 1000

              begin set property
                push const number 1000
                get local var auto create ball (19 0)
                push const string "zOrder"
              end set property ret values 0


[372] this.insert(ball)

              begin call method
                push this
                begin params 2
                  push const string "insert"
                  ,
                  get local var ball (19 0)
                end params ret values 2
              end call method ret values 0


[374] var friction, gravity = 0.9, 9

              begin set local var
                begin set local var
                  begin params 2
                    push const number 0.9
                    ,
                    push const number 9
                  end params ret values 2
                end set local var gravity (21 0)
              end set local var friction (20 0)


[375] var screenWidth, screenHeight = this.width, this.height

              begin set local var
                begin set local var
                  begin params 2
                    begin get property
                      push this
                      push const string "width"
                    end get property ret values 1
                    ,
                    begin get property
                      push this
                      push const string "height"
                    end get property ret values 1
                  end params ret values 2
                end set local var screenHeight (23 0)
              end set local var screenWidth (22 0)


[376] var speedX, speedY = math.random(-0.5, 0.5)*screenWidth, math.random(0.5, 1)*screenWidth

              begin set local var
                begin set local var
                  begin params 2
                    begin operator *
                      begin call method
                        get env var math
                        begin params 3
                          push const string "random"
                          ,
                          begin neg
                            push const number 0.5
                          end neg
                          ,
                          push const number 0.5
                        end params ret values 3
                      end call method ret values 1
                      get local var screenWidth (22 0)
                    end operator *
                    ,
                    begin operator *
                      begin call method
                        get env var math
                        begin params 3
                          push const string "random"
                          ,
                          push const number 0.5
                          ,
                          push const number 1
                        end params ret values 3
                      end call method ret values 1
                      get local var screenWidth (22 0)
                    end operator *
                  end params ret values 2
                end set local var speedY (25 0)
              end set local var speedX (24 0)


[377] var radius = ball.width/2

              begin set local var
                begin operator /
                  begin get property
                    get local var ball (19 0)
                    push const string "width"
                  end get property ret values 1
                  push const number 2
                end operator /
              end set local var radius (26 0)


[379] ball.addEventListener("touch", function(touch){

              begin call method
                get local var ball (19 0)
                begin params 3
                  push const string "addEventListener"
                  ,
                  push const string "touch"
                  ,
                  begin function
                    begin locals, total 3
                      0 touch (param)
                      1 _E
                      2 _G
                    end locals

[380] if(touch.phase == "start"){

                    begin if
                      begin bool exp
                        begin logic ==
                          begin get property
                            get local var touch (0 0 param)
                            push const string "phase"
                          end get property ret values 1
                          push const string "start"
                        end logic ==
                      end bool exp
                      begin then

[382] this.x0, this.y0 = touch.x - this.x, touch.y - this.y

                        begin scope
                          begin set property
                            begin set property
                              begin params 2
                                begin operator -
                                  begin get property
                                    get local var touch (0 0 param)
                                    push const string "x"
                                  end get property ret values 1
                                  begin get property
                                    push this
                                    push const string "x"
                                  end get property ret values 1
                                end operator -
                                ,
                                begin operator -
                                  begin get property
                                    get local var touch (0 0 param)
                                    push const string "y"
                                  end get property ret values 1
                                  begin get property
                                    push this
                                    push const string "y"
                                  end get property ret values 1
                                end operator -
                              end params ret values 2
                              push this
                              push const string "y0"
                            end set property ret values 1
                            push this
                            push const string "x0"
                          end set property ret values 0


[383] this.removeEventListener("enterFrame", physUpdate)

                          begin call method
                            push this
                            begin params 3
                              push const string "removeEventListener"
                              ,
                              push const string "enterFrame"
                              ,
                              get local var physUpdate (30 1)
                            end params ret values 3
                          end call method ret values 0


[384] this.addEventListener("enterFrame", trackVelocity)

                          begin call method
                            push this
                            begin params 3
                              push const string "addEventListener"
                              ,
                              push const string "enterFrame"
                              ,
                              get local var trackVelocity (29 1)
                            end params ret values 3
                          end call method ret values 0
                        end scope ret values 0
                      end then
                      begin else

[385] }else if(touch.phase == "move"){

                        begin if
                          begin bool exp
                            begin logic ==
                              begin get property
                                get local var touch (0 0 param)
                                push const string "phase"
                              end get property ret values 1
                              push const string "move"
                            end logic ==
                          end bool exp
                          begin then

[386] this.x, this.y = touch.x - this.x0, touch.y - this.y0

                            begin scope
                              begin set property
                                begin set property
                                  begin params 2
                                    begin operator -
                                      begin get property
                                        get local var touch (0 0 param)
                                        push const string "x"
                                      end get property ret values 1
                                      begin get property
                                        push this
                                        push const string "x0"
                                      end get property ret values 1
                                    end operator -
                                    ,
                                    begin operator -
                                      begin get property
                                        get local var touch (0 0 param)
                                        push const string "y"
                                      end get property ret values 1
                                      begin get property
                                        push this
                                        push const string "y0"
                                      end get property ret values 1
                                    end operator -
                                  end params ret values 2
                                  push this
                                  push const string "y"
                                end set property ret values 1
                                push this
                                push const string "x"
                              end set property ret values 0
                            end scope ret values 0
                          end then
                          begin else

[387] }else if(touch.phase == "end" || touch.phase == "cancel"){

                            begin if
                              begin bool exp
                                begin logic ||
                                  begin logic ==
                                    begin get property
                                      get local var touch (0 0 param)
                                      push const string "phase"
                                    end get property ret values 1
                                    push const string "end"
                                  end logic ==
                                  begin logic ==
                                    begin get property
                                      get local var touch (0 0 param)
                                      push const string "phase"
                                    end get property ret values 1
                                    push const string "cancel"
                                  end logic ==
                                end logic ||
                              end bool exp
                              begin then

[388] this.addEventListener("enterFrame", physUpdate)

                                begin scope
                                  begin call method
                                    push this
                                    begin params 3
                                      push const string "addEventListener"
                                      ,
                                      push const string "enterFrame"
                                      ,
                                      get local var physUpdate (30 1)
                                    end params ret values 3
                                  end call method ret values 0


[389] this.removeEventListener("enterFrame", trackVelocity)

                                  begin call method
                                    push this
                                    begin params 3
                                      push const string "removeEventListener"
                                      ,
                                      push const string "enterFrame"
                                      ,
                                      get local var trackVelocity (29 1)
                                    end params ret values 3
                                  end call method ret values 0
                                end scope ret values 0
                              end then
                            end if ret values 0
                          end else
                        end if ret values 0
                      end else
                    end if ret values 0
                  end function
                end params ret values 3
              end call method ret values 0


[393] var prevX, prevY = 0, 0

              begin set local var
                begin set local var
                  begin params 2
                    push const number 0
                    ,
                    push const number 0
                  end params ret values 2
                end set local var prevY (28 0)
              end set local var prevX (27 0)


[394] var function trackVelocity(params){

              begin set local var
                begin function
                  begin locals, total 3
                    0 params (param)
                    1 _E
                    2 _G
                  end locals

[395] speedX = (this.x - prevX) / params.deltaTime

                  begin set local var
                    begin operator /
                      begin operator -
                        begin get property
                          push this
                          push const string "x"
                        end get property ret values 1
                        get local var prevX (27 1)
                      end operator -
                      begin get property
                        get local var params (0 0 param)
                        push const string "deltaTime"
                      end get property ret values 1
                    end operator /
                  end set local var speedX (24 1)


[396] speedY = (this.y - prevY) / params.deltaTime

                  begin set local var
                    begin operator /
                      begin operator -
                        begin get property
                          push this
                          push const string "y"
                        end get property ret values 1
                        get local var prevY (28 1)
                      end operator -
                      begin get property
                        get local var params (0 0 param)
                        push const string "deltaTime"
                      end get property ret values 1
                    end operator /
                  end set local var speedY (25 1)


[397] prevX, prevY = this.x, this.y

                  begin set local var
                    begin set local var
                      begin params 2
                        begin get property
                          push this
                          push const string "x"
                        end get property ret values 1
                        ,
                        begin get property
                          push this
                          push const string "y"
                        end get property ret values 1
                      end params ret values 2
                    end set local var prevY (28 1)
                  end set local var prevX (27 1)
                end function
              end set local var trackVelocity (29 0)


[400] var function physUpdate(params){

              begin set local var
                begin function
                  begin locals, total 3
                    0 params (param)
                    1 _E
                    2 _G
                  end locals

[401] speedY = speedY + gravity

                  begin set local var
                    begin operator +
                      get local var speedY (25 1)
                      get local var gravity (21 1)
                    end operator +
                  end set local var speedY (25 1)


[402] this.x = this.x + speedX * params.deltaTime

                  begin set property
                    begin operator +
                      begin get property
                        push this
                        push const string "x"
                      end get property ret values 1
                      begin operator *
                        get local var speedX (24 1)
                        begin get property
                          get local var params (0 0 param)
                          push const string "deltaTime"
                        end get property ret values 1
                      end operator *
                    end operator +
                    push this
                    push const string "x"
                  end set property ret values 0


[403] this.y = this.y + speedY * params.deltaTime

                  begin set property
                    begin operator +
                      begin get property
                        push this
                        push const string "y"
                      end get property ret values 1
                      begin operator *
                        get local var speedY (25 1)
                        begin get property
                          get local var params (0 0 param)
                          push const string "deltaTime"
                        end get property ret values 1
                      end operator *
                    end operator +
                    push this
                    push const string "y"
                  end set property ret values 0


[404] if(this.x >= screenWidth - radius){

                  begin if
                    begin bool exp
                      begin logic >=
                        begin get property
                          push this
                          push const string "x"
                        end get property ret values 1
                        begin operator -
                          get local var screenWidth (22 1)
                          get local var radius (26 1)
                        end operator -
                      end logic >=
                    end bool exp
                    begin then

[405] this.x = screenWidth - radius

                      begin scope
                        begin set property
                          begin operator -
                            get local var screenWidth (22 1)
                            get local var radius (26 1)
                          end operator -
                          push this
                          push const string "x"
                        end set property ret values 0


[406] speedX = speedX * -friction

                        begin set local var
                          begin operator *
                            get local var speedX (24 1)
                            begin neg
                              get local var friction (20 1)
                            end neg
                          end operator *
                        end set local var speedX (24 1)
                      end scope ret values 0
                    end then
                    begin else

[407] }else if(this.x <= radius){

                      begin if
                        begin bool exp
                          begin logic <=
                            begin get property
                              push this
                              push const string "x"
                            end get property ret values 1
                            get local var radius (26 1)
                          end logic <=
                        end bool exp
                        begin then

[408] this.x = radius

                          begin scope
                            begin set property
                              get local var radius (26 1)
                              push this
                              push const string "x"
                            end set property ret values 0


[409] speedX = speedX * -friction

                            begin set local var
                              begin operator *
                                get local var speedX (24 1)
                                begin neg
                                  get local var friction (20 1)
                                end neg
                              end operator *
                            end set local var speedX (24 1)
                          end scope ret values 0
                        end then
                      end if ret values 0
                    end else
                  end if ret values 0


[411] if(this.y >= screenHeight - radius){

                  begin if
                    begin bool exp
                      begin logic >=
                        begin get property
                          push this
                          push const string "y"
                        end get property ret values 1
                        begin operator -
                          get local var screenHeight (23 1)
                          get local var radius (26 1)
                        end operator -
                      end logic >=
                    end bool exp
                    begin then

[412] this.y = screenHeight - radius

                      begin scope
                        begin set property
                          begin operator -
                            get local var screenHeight (23 1)
                            get local var radius (26 1)
                          end operator -
                          push this
                          push const string "y"
                        end set property ret values 0


[413] speedY = speedY * -friction

                        begin set local var
                          begin operator *
                            get local var speedY (25 1)
                            begin neg
                              get local var friction (20 1)
                            end neg
                          end operator *
                        end set local var speedY (25 1)


[414] speedX = speedX * friction

                        begin set local var
                          begin operator *
                            get local var speedX (24 1)
                            get local var friction (20 1)
                          end operator *
                        end set local var speedX (24 1)
                      end scope ret values 0
                    end then
                    begin else

[415] }else if(this.y <= radius){

                      begin if
                        begin bool exp
                          begin logic <=
                            begin get property
                              push this
                              push const string "y"
                            end get property ret values 1
                            get local var radius (26 1)
                          end logic <=
                        end bool exp
                        begin then

[416] this.y = radius

                          begin scope
                            begin set property
                              get local var radius (26 1)
                              push this
                              push const string "y"
                            end set property ret values 0


[417] speedY = speedY * -friction

                            begin set local var
                              begin operator *
                                get local var speedY (25 1)
                                begin neg
                                  get local var friction (20 1)
                                end neg
                              end operator *
                            end set local var speedY (25 1)
                          end scope ret values 0
                        end then
                      end if ret values 0
                    end else
                  end if ret values 0
                end function
              end set local var physUpdate (30 0)


[420] ball.addEventListener("enterFrame", physUpdate)

              begin call method
                get local var ball (19 0)
                begin params 3
                  push const string "addEventListener"
                  ,
                  push const string "enterFrame"
                  ,
                  get local var physUpdate (30 0)
                end params ret values 3
              end call method ret values 0
            end scope ret values 0
          end function
        end set by name: [__construct]
      end object
    end extends ret values 1
  end set env var MyScene


[425] director.scene = MyScene()

  begin set property
    begin call method
      get local var _E (0 0)
      begin params 1
        push const string "MyScene"
      end params ret values 1
    end call method ret values 1
    get local var auto create director (7 0)
    push const string "scene"
  end set property ret values 0


[427] require("bitmapfont")

  begin call method
    get local var _E (0 0)
    begin params 2
      push const string "require"
      ,
      push const string "bitmapfont"
    end params ret values 2
  end call method ret values 0

  begin code list
    begin return
      get local var _E (0 0)
    end return values 1
  end code list ret values 0
end function
